{"version":3,"sources":["components/app/app.module.css","components/loader/loader.module.css","components/modal-overlay/modal-overlay.module.css","components/constructor-ingredient/add-ingredient.module.css","components/app-header/app-header.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app-header/app-header.tsx","services/hooks.ts","components/loader/loader.tsx","components/ingredient-details/ingredient-details.tsx","services/utils.ts","services/api.ts","services/constants/auth.ts","services/actions/auth.ts","components/protected-route/protected-route.tsx","components/modal-overlay/modal-overlay.tsx","services/constants/modal.ts","components/modal/modal.tsx","components/burger-ingredient/burger-ingredient.tsx","components/burger-ingredients/burger-ingredients.tsx","services/constants/constructor.ts","services/constants/order.ts","components/constructor-ingredient/add-ingredient.tsx","services/actions/constructor.ts","components/burger-constructor/burger-constructor.tsx","services/actions/order.ts","components/order-details/order-details.tsx","pages/main/main.tsx","pages/login/login.tsx","pages/register/register.tsx","pages/forgot/forgot.tsx","pages/reset/reset.tsx","components/nav-profile/nav-profile.tsx","pages/profile/profile.tsx","components/icon-ingredient/icon-ingredient.tsx","components/order-blank-history/order-blank-history.tsx","services/constants/ws-private.ts","pages/history/history.tsx","components/info-total-orders/info-total-orders.tsx","services/constants/ws.ts","pages/feed/feed.tsx","components/item-in-order/item-in-order.tsx","pages/single-order/single-order.tsx","services/constants/ingredients.ts","components/app/app.tsx","services/actions/ingredients.ts","services/reducers/ingredients.ts","services/reducers/constructor.ts","services/reducers/order.ts","services/reducers/auth.ts","services/reducers/ws.ts","services/reducers/ws-private.ts","services/reducers/index.ts","services/middleware/socket-middleware.ts","services/actions/ws.ts","services/actions/ws-private.ts","services/store.ts","index.tsx","components/info-total-orders/info-total-orders.module.css","components/ingredient-details/ingredient-details.module.css","components/burger-constructor/burger-constructor.module.css","components/order-blank-history/order-blank-history.module.css","pages/single-order/single-order.module.css","pages/login/login.module.css","pages/profile/profile.module.css","pages/register/register.module.css","pages/forgot/forgot.module.css","pages/reset/reset.module.css","components/nav-profile/nav-profile.module.css","pages/history/history.module.css","components/icon-ingredient/icon-ingredient.module.css","components/item-in-order/item-in-order.module.css","components/modal/modal.module.css","components/burger-ingredient/burger-ingredient.module.css","components/order-details/order-details.module.css","pages/feed/feed.module.css"],"names":["module","exports","AppHeader","location","useLocation","pathname","className","style","header","container","wrapperNav","ul","li","exact","to","button","activeClassName","active","type","wrapperLogo","wrapperLk","useDispatch","dispatchHook","useSelector","selectorHook","Loader","ldsDualRing","IngredientDetails","headerText","id","useParams","ingredients","store","selectedIngredient","find","item","_id","ingredient","src","image_large","alt","name","info","wrapper","calories","proteins","fat","carbohydrates","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","transformDate","date","dataCreate","today","setHours","days","diffTime","Math","ceil","hours","getHours","min","getMinutes","getTimezoneOffset","showStatus","status","color","orderStatus","checkResponse","response","ok","json","Promise","reject","url","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_ERROR","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_ERROR","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_ERROR","REFRESH_REQUEST","REFRESH_SUCCESS","REFRESH_ERROR","FORGOT_REQUEST","FORGOT_SUCCESS","FORGOT_ERROR","RESET_REQUEST","RESET_SUCCESS","RESET_ERROR","USER_REQUEST","USER_SUCCESS","USER_ERROR","EDIT_REQUEST","EDIT_SUCCESS","EDIT_ERROR","refresh","dispatch","fetch","method","headers","mode","cache","credentials","body","JSON","stringify","token","localStorage","getItem","then","accessToken","split","refreshToken","setItem","catch","ProtectedRouteAuth","children","rest","hasToken","auth","useEffect","render","state","target","getNextPage","history","result","ProtectedRouteUnAuth","ModalOverlay","closeModal","overlay","onClick","CLOSE_MODAL","modalContainer","getElementById","Modal","back","useHistory","push","closeModalsByEscape","e","key","addEventListener","removeEventListener","ReactDOM","createPortal","modal","BurgerIngredient","constructor","constructorIngredients","constructorBun","useDrag","collect","monitor","isDrag","isDragging","dragRef","count","useMemo","filter","length","background","cardIngredient","ref","data-test","size","image","price","BurgerIngredients","useState","tab","setTab","wrapperRef","useRef","bunRef","sauceRef","mainRef","handleTab","current","scrollIntoView","block","behavior","handlerScrollBar","useCallback","scrollTop","scrollHeight","burgerIngredients","tabs","wrapperAllIngredients","onScroll","allIngredients","cardsIngredients","map","MOVE_CONSTRUCTOR_ITEM","ADD_CONSTRUCTOR_INGREDIENT","DEL_CONSTRUCTOR_INGREDIENT","ADD_ORDER_REQUEST","ADD_ORDER_SUCCESS","ADD_ORDER_ERROR","AddIngredient","index","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","moveConstructorItem","dropRef","opacity","data-handler-id","text","thumbnail","handleClose","BurgerConstructor","orderRequest","order","drop","randomId","round","random","dropTarget","totalPrice","reduce","calculate","burgerConstructor","bun","isLocked","dopElement","finalPrice","listId","fullList","idForOrder","Authorization","number","paddingLeft","OrderDetails","done","Main","ingredientsError","orderSuccess","DndProvider","backend","HTML5Backend","Login","email","setEmail","password","setPassword","onSubmit","preventDefault","payload","user","login","form","placeholder","onChange","nav","link","Register","setName","registration","Forgot","forgot","Reset","forgotSuccess","setToken","reset","icon","NavProfile","exit","removeItem","logout","Profile","defaultName","defaultEmail","redirect","referrerPolicy","edit","errorText","buttons","IconIngredient","pict","img","inf","OrderBlankHistory","createdAt","ingredientsCatalog","orderIngredients","total","sum","singleStatus","base","group","slice","i","image_mobile","left","zIndex","WS_CONNECTION_PRIVATE_START","WS_CONNECTION_PRIVATE_SUCCESS","WS_CONNECTION_PRIVATE_ERROR","WS_CONNECTION_PRIVATE_CLOSED","WS_GET_MESSAGE_PRIVATE","History","messages","wsPrivate","feed","orders","InfoTotalOrders","ws","totalToday","readyOrders","upcomingOrders","stage","ready","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","Feed","content","ItemInOrder","SingleOrder","isProfile","useRouteMatch","catalog","selectedOrder","footer","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_ERROR","App","data","ModalSwitch","action","main","ingredientsSuccess","initialState","ingredientsRequest","orderFailed","registerRequest","registerSuccess","regitsterError","loginRequest","loginSuccess","loginError","logoutRequest","logoutSuccess","logoutError","refreshRequest","refreshSuccess","refreshError","forgotRequest","forgotError","resetRequest","resetSuccess","resetError","userRequest","userSuccess","userError","editRequest","editSuccess","editError","wsConnected","error","rootReducer","combineReducers","arr","dragElement","hoverElement","socketMiddleware","wsUrl","wsActions","socket","next","wsInit","wsSendMessage","onOpen","onClose","onError","onMessage","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","success","onclose","message","send","wsPrivateActions","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"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","file":"static/js/main.520a217e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3yfFw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsDualRing\":\"loader_ldsDualRing__1gq9l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__AKixE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"add-ingredient_wrapper__MFvyb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"container\":\"app-header_container__2ER_-\",\"wrapperNav\":\"app-header_wrapperNav__24HB_\",\"wrapperLogo\":\"app-header_wrapperLogo__2krvQ\",\"wrapperLk\":\"app-header_wrapperLk__1qAw5\",\"button\":\"app-header_button__1tHq1\",\"li\":\"app-header_li__2_K6w\",\"ul\":\"app-header_ul__1EGkg\",\"active\":\"app-header_active__1gFZ7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredients\":\"burger-ingredients_burgerIngredients__2i6ZI\",\"allIngredients\":\"burger-ingredients_allIngredients__FaT7m\",\"tabs\":\"burger-ingredients_tabs__1yNyE\",\"tab\":\"burger-ingredients_tab__1Ru1Z\",\"wrapperAllIngredients\":\"burger-ingredients_wrapperAllIngredients__2LqNd\",\"ingredients\":\"burger-ingredients_ingredients__2TY9H\",\"cardsIngredients\":\"burger-ingredients_cardsIngredients__34MmZ\"};","import { NavLink, useLocation, Link } from 'react-router-dom';\nimport style from './app-header.module.css';\nimport {\n  Logo,\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\n\nconst AppHeader = () => {\n  const location = useLocation().pathname;\n\n  return (\n    <header className={style.header + ' pt-4 pb-4'}>\n      <div className={style.container}>\n        <div className={style.wrapperNav}>\n          <nav>\n            <ul\n              className={`${style.ul} text text_type_main-default text_color_inactive`}\n            >\n              <li className={style.li}>\n                <NavLink\n                  exact\n                  to='/'\n                  className={`${style.button} mr-2`}\n                  activeClassName={style.active}\n                >\n                  <BurgerIcon type='secondary' />\n                  <span className='pl-2 '>Конструктор</span>\n                </NavLink>\n              </li>\n              <li>\n                <NavLink\n                  to='/feed'\n                  className={style.button}\n                  activeClassName={style.active}\n                >\n                  <ListIcon type='secondary' />\n                  <span className='pl-2'>Лента заказов</span>\n                </NavLink>\n              </li>\n            </ul>\n          </nav>\n        </div>\n        <div className={style.wrapperLogo}>\n          <Link to='/'>\n            <Logo />\n          </Link>\n        </div>\n        <div\n          className={`${style.wrapperLk} text text_type_main-default text_color_inactive`}\n        >\n          <NavLink\n            to='/profile'\n            className={\n              location === '/profile' || location === '/login'\n                ? `${style.button} ${style.active}`\n                : style.button\n            }\n            activeClassName={style.active}\n          >\n            <ProfileIcon type='secondary' />\n            <span className='pl-2'>Личный кабинет</span>\n          </NavLink>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default AppHeader;\n","import {\n  TypedUseSelectorHook,\n  useDispatch as dispatchHook,\n  useSelector as selectorHook\n} from 'react-redux';\nimport { AppDispatch, AppThunk, RootState } from './types';\n\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\n","import style from './loader.module.css';\nconst Loader = () => <div className={style.ldsDualRing}></div>;\nexport default Loader;\n","import { FC } from 'react';\nimport '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './ingredient-details.module.css';\nimport { useSelector} from '../../services/hooks';\nimport { useParams } from 'react-router-dom';\nimport { TIngredient} from '../../services/types';\nimport Loader from '../loader/loader';\ninterface IIngredientDetails{headerText?: string};\n\nconst IngredientDetails: FC<IIngredientDetails>= ({ headerText }) => {\n  const { id } = useParams<{ id: string }>();\n  const { ingredients } = useSelector((store) => store.ingredients);\n  const selectedIngredient = ingredients?.find((item:TIngredient) => item._id === id);\n    if (!selectedIngredient) {\n      return (<Loader/>)\n    }\n  return (\n    <section className={style.ingredient}>\n      <h2 className='text text_type_main-large mt-30'>{headerText}</h2>\n      <img src={selectedIngredient.image_large} alt={selectedIngredient.name} className='mb-4' />\n      <h2 className='text text_type_main-medium mb-8'>{selectedIngredient.name}</h2>\n      <div className={style.info + ' text_color_inactive mb-15'}>\n        <div className={style.wrapper}>\n          <span className='text text_type_main-default pb-2'>Калории,ккал</span>\n          <span className='text text_type_digits-default'>{selectedIngredient.calories}</span>\n        </div>\n        <div className={style.wrapper}>\n          <span className='text text_type_main-default pb-2'>Белки, г</span>\n          <span className='text text_type_digits-default'>{selectedIngredient.proteins}</span>\n        </div>\n        <div className={style.wrapper}>\n          <span className='text text_type_main-default pb-2'>Жиры, г</span>\n          <span className='text text_type_digits-default'>{selectedIngredient.fat}</span>\n        </div>\n        <div className={style.wrapper}>\n          <span className='text text_type_main-default pb-2'>Углеводы, г</span>\n          <span className='text text_type_digits-default'>{selectedIngredient.carbohydrates}</span>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default IngredientDetails;\n","export const getCookie = (name: string): string | undefined => {\n  const matches = document.cookie.match(\n    new RegExp(\n      '(?:^|; )' +\n        // eslint-disable-next-line no-useless-escape\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') +\n        '=([^;]*)'\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n};\n\nexport const setCookie = (name: string, value: string, props: { [key: string]: {} } & { expires?: number | Date | string } = {}) => {\n  props = {\n    path: '/',\n    ...props,\n  };\n  let exp = props.expires;\n  if (typeof exp == 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && (exp as Date).toUTCString) {\n    props.expires = (exp as Date).toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n};\n\nexport const deleteCookie = (name: string) => {\n  setCookie(name, '', { expires: -1 });\n};\n\nexport const transformDate = (date: string) => {\n  const getDiffDays = (days: number) =>\n    days === 0\n      ? 'Сегодня'\n      : days === 1\n      ? 'Вчера'\n      : days > 1\n      ? `${days} дня назад`\n      : '';\n  const dataCreate = new Date(date);\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  const diffTime = Math.ceil((+today - +dataCreate) / (60 * 60 * 24 * 1000));\n  const hours =\n    dataCreate.getHours() > 9\n      ? dataCreate.getHours()\n      : `0${dataCreate.getHours()}`;\n  const min =\n    dataCreate.getMinutes() > 9\n      ? dataCreate.getMinutes()\n      : `0${dataCreate.getMinutes()}`;\n  return `${getDiffDays(diffTime)},${hours}:${min}i-GMT+${\n    (dataCreate.getTimezoneOffset() * -1) / 60\n  }`;\n};\nexport const showStatus = (status: string | null): {color: string, orderStatus: string} | null => {\n  if (status === 'done') {return {color:'#00cccc', orderStatus: 'Выполнен'}} if (status === 'pending') {return {color: 'white', orderStatus: 'Готовится'}} if (status === 'pending') {return {color: 'white', orderStatus: 'Создан'}} else {return null}\n}\n","export const checkResponse = (response: Response) => {\n  return response.ok ? response.json() : Promise.reject(response);\n};\nexport const url = 'https://norma.nomoreparties.space/api/';\n","//регистрация\nexport const REGISTER_REQUEST = 'REGISTER_REQUEST';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_ERROR = 'REGISTER_ERROR';\n//авторизация\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_ERROR = 'LOGIN_ERROR';\n//выход\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const LOGOUT_ERROR = 'LOGOUT_ERROR';\n//обновление токена\nexport const REFRESH_REQUEST = 'REFRESH_REQUEST';\nexport const REFRESH_SUCCESS = 'REFRESH_SUCCESS';\nexport const REFRESH_ERROR = 'REFRESH_ERROR';\n//запрос на восстановление пароля\nexport const FORGOT_REQUEST = 'FORGOT_REQUEST';\nexport const FORGOT_SUCCESS = 'FORGOT_SUCCESS';\nexport const FORGOT_ERROR = 'FORGOT_ERROR';\n//сброс пароля\nexport const RESET_REQUEST = 'RESET_REQUEST';\nexport const RESET_SUCCESS = 'RESET_SUCCESS';\nexport const RESET_ERROR = 'RESET_ERROR';\n//получение данных пользователя\nexport const USER_REQUEST = 'USER_REQUEST';\nexport const USER_SUCCESS = 'USER_SUCCESS';\nexport const USER_ERROR = 'USER_ERROR';\n//изменение данных пользователя\nexport const EDIT_REQUEST = 'EDIT_REQUEST';\nexport const EDIT_SUCCESS = 'EDIT_SUCCESS';\nexport const EDIT_ERROR = 'EDIT_ERROR';\n","import { RouteComponentProps } from 'react-router-dom';\nimport { setCookie, deleteCookie, getCookie } from '../utils';\nimport { checkResponse, url } from '../api';\nimport { AppThunk } from '../types';\nimport {//регистрация\n  REGISTER_REQUEST,\n  REGISTER_SUCCESS,\n  REGISTER_ERROR,\n  //авторизация\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGIN_ERROR,\n  //выход\n  LOGOUT_REQUEST,\n  LOGOUT_SUCCESS,\n  LOGOUT_ERROR,\n  //обновление токена\n  REFRESH_REQUEST,\n  REFRESH_SUCCESS,\n  REFRESH_ERROR,\n  //запрос на восстановление пароля\n  FORGOT_REQUEST,\n  FORGOT_SUCCESS,\n  FORGOT_ERROR,\n  //сброс пароля\n  RESET_REQUEST,\n  RESET_SUCCESS,\n  RESET_ERROR,\n  //получение данных пользователя\n  USER_REQUEST,\n  USER_SUCCESS,\n  USER_ERROR,\n  //изменение данных пользователя\n  EDIT_REQUEST,\n  EDIT_SUCCESS,\n  EDIT_ERROR,} from '../constants/auth';\n  interface IRegisterReqestAction {readonly type: typeof REGISTER_REQUEST;}\n  interface IRegisterSuccessAction {readonly type: typeof REGISTER_SUCCESS; readonly payload: {name: string, email: string};}\n  interface IRegisterErrorAction {readonly type: typeof REGISTER_ERROR;}\n\n  interface ILoginReqestAction {readonly type: typeof LOGIN_REQUEST;}\n  interface ILoginSuccessAction {readonly type: typeof LOGIN_SUCCESS; readonly payload: {name: string, email: string};}\n  interface ILoginErrorAction {readonly type: typeof LOGIN_ERROR;}\n\n  interface ILogoutReqestAction {readonly type: typeof LOGOUT_REQUEST;}\n  interface ILogoutSuccessAction {readonly type: typeof LOGOUT_SUCCESS;}\n  interface ILogoutErrorAction {readonly type: typeof LOGOUT_ERROR;}\n\n  interface IRefreshReqestAction {readonly type: typeof REFRESH_REQUEST;}\n  interface IRefreshSuccessAction {readonly type: typeof REFRESH_SUCCESS;}\n  interface IRefreshErrorAction {readonly type: typeof REFRESH_ERROR;}\n\n  interface IForgotReqestAction {readonly type: typeof FORGOT_REQUEST;}\n  interface IForgotSuccessAction {readonly type: typeof FORGOT_SUCCESS;}\n  interface IForgotErrorAction {readonly type: typeof FORGOT_ERROR;}\n\n  interface IResetReqestAction {readonly type: typeof RESET_REQUEST;}\n  interface IResetSuccessAction {readonly type: typeof RESET_SUCCESS;}\n  interface IResetErrorAction {readonly type: typeof RESET_ERROR;}\n\n  interface IUserReqestAction {readonly type: typeof USER_REQUEST;}\n  interface IUserSuccessAction {readonly type: typeof USER_SUCCESS; readonly payload: {name: string, email: string};}\n  interface IUserErrorAction {readonly type: typeof USER_ERROR;}\n\n  interface IEditReqestAction {readonly type: typeof EDIT_REQUEST;}\n  interface IEditSuccessAction {readonly type: typeof EDIT_SUCCESS; readonly payload: {name: string, email: string};}\n  interface IEditErrorAction {readonly type: typeof EDIT_ERROR;}\n\n  export type TAuthAction = IRegisterReqestAction | IRegisterSuccessAction | IRegisterErrorAction | ILoginReqestAction | ILoginSuccessAction | ILoginErrorAction | ILogoutReqestAction | ILogoutSuccessAction | ILogoutErrorAction | IRefreshReqestAction | IRefreshSuccessAction | IRefreshErrorAction | IForgotReqestAction | IForgotSuccessAction | IForgotErrorAction | IUserReqestAction | IUserSuccessAction | IUserErrorAction | IEditReqestAction | IEditSuccessAction | IEditErrorAction | IResetReqestAction | IResetSuccessAction | IResetErrorAction;\n\nexport const registration:AppThunk = (email: string, password: string, name: string) => (dispatch) => {\n  dispatch({\n    type: REGISTER_REQUEST,\n  });\n  fetch(`${url}auth/register`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    body: JSON.stringify({ email, password, name }),\n  })\n    .then((response) => checkResponse(response))\n    .then((response) => {\n      const accessToken = response.accessToken.split('Bearer ')[1];\n      const refreshToken = response.refreshToken;\n      setCookie('token', accessToken);\n      localStorage.setItem('refreshToken', refreshToken);\n      dispatch({\n        type: REGISTER_SUCCESS,\n        payload: response.user,\n      });\n    })\n    .catch((response) => {\n      dispatch({\n        type: REGISTER_ERROR,\n      });\n    });\n};\n\nexport const login:AppThunk = (email: string, password: string) => (dispatch) => {\n  dispatch({\n    type: LOGIN_REQUEST,\n  });\n  fetch(`${url}auth/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    body: JSON.stringify({ email, password }),\n  })\n    .then((response) => checkResponse(response))\n    .then((response) => {\n      const accessToken = response.accessToken.split('Bearer ')[1];\n      const refreshToken = response.refreshToken;\n      setCookie('token', accessToken);\n      localStorage.setItem('refreshToken', refreshToken);\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: response.user,\n      });\n    })\n    .catch((response) => {\n      dispatch({\n        type: LOGIN_ERROR,\n      });\n    });\n};\nexport const logout:AppThunk = (history: RouteComponentProps[\"history\"]) => (dispatch) => {\n  dispatch({\n    type: LOGOUT_REQUEST,\n  });\n  fetch(`${url}auth/logout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n  })\n    .then((response) => checkResponse(response))\n    .then(() => {\n      deleteCookie('token');\n      localStorage.removeItem('refreshToken');\n      dispatch({\n        type: LOGOUT_SUCCESS,\n      });\n      history.replace('/');\n    })\n    .catch(() => {\n      dispatch({\n        type: LOGOUT_ERROR,\n      });\n    });\n};\nexport const refresh:AppThunk = () => (dispatch) => {\n  dispatch({\n    type: REFRESH_REQUEST,\n  });\n  fetch(`${url}auth/token`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n  })\n    .then((response) => checkResponse(response))\n    .then((response) => {\n      const accessToken = response.accessToken.split('Bearer ')[1];\n      const refreshToken = response.refreshToken;\n      setCookie('token', accessToken);\n      localStorage.setItem('refreshToken', refreshToken);\n      dispatch({\n        type: REFRESH_SUCCESS,\n      });\n    })\n    .catch(() => {\n      dispatch({\n        type: REFRESH_ERROR,\n      });\n    });\n};\nexport const forgot:AppThunk = (email: string, history: RouteComponentProps[\"history\"]) => (dispatch) => {\n  dispatch({\n    type: FORGOT_REQUEST,\n  });\n  fetch(`${url}password-reset`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    body: JSON.stringify({ email }),\n  })\n    .then((response) => checkResponse(response))\n    .then(() => {\n      dispatch({\n        type: FORGOT_SUCCESS,\n      });\n      history.replace('/reset-password');\n    })\n    .catch(() => {\n      dispatch({\n        type: FORGOT_ERROR,\n      });\n    });\n};\nexport const reset:AppThunk = (password: string, token: string, history: RouteComponentProps[\"history\"]) => (dispatch) => {\n  dispatch({\n    type: RESET_REQUEST,\n  });\n  fetch(`${url}password-reset/reset`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    body: JSON.stringify({ password, token }),\n  })\n    .then((response) => checkResponse(response))\n    .then(() => {\n      dispatch({\n        type: RESET_SUCCESS,\n      });\n      history.replace('/login');\n    })\n    .catch(() => {\n      dispatch({\n        type: RESET_ERROR,\n      });\n    });\n};\nexport const user:AppThunk = () => (dispatch) => {\n  dispatch({\n    type: USER_REQUEST,\n  });\n  fetch(`${url}auth/user`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n  })\n    .then((response) => checkResponse(response))\n    .then((response) => {\n      dispatch({\n        type: USER_SUCCESS,\n        payload: response.user,\n      });\n    })\n    .catch(() => {\n      dispatch({\n        type: USER_ERROR,\n      });\n      deleteCookie('token');\n      localStorage.removeItem('refreshToken');\n    });\n};\n\nexport const edit:AppThunk = (email: string, password: string, name: string) => (dispatch) => {\n  dispatch({\n    type: EDIT_REQUEST,\n  });\n  fetch(`${url}auth/user`, {\n    method: 'PATCH',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n    body: JSON.stringify({ email, password, name }),\n  })\n    .then((response) => checkResponse(response))\n    .then((response) => {\n      dispatch({\n        type: EDIT_SUCCESS,\n        payload: response.user,\n      });\n    })\n    .catch(() => {\n      dispatch({\n        type: EDIT_ERROR,\n      });\n      refresh();\n    });\n};\n","import { Redirect, Route } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../services/hooks';\nimport { useEffect, FC, ReactNode } from 'react';\nimport { refresh } from '../../services/actions/auth';\ninterface iProtectedRouteAuth {\n  path: string;\n  exact?: boolean;\n  children: React.ReactNode;\n}\nexport const ProtectedRouteAuth: FC<iProtectedRouteAuth> = ({\n  children,\n  ...rest\n}) => {\n  const dispatch = useDispatch();\n  const hasToken = localStorage.getItem('refreshToken');\n  const { name } = useSelector((store) => store.auth);\n  useEffect(() => {\n    dispatch(refresh());\n  }, [dispatch]);\n  const render = ({ location }: { location: ReactNode }) => {\n    if (name || hasToken) {\n      return children;\n    }\n    return (\n      <Redirect to={{ pathname: '/login', state: { target: location } }} />\n    );\n  };\n  return <Route {...rest} render={render} />;\n};\n\nconst getNextPage = (\n  location: { state: { target?: string } },\n  history: ReactNode\n) => {\n  let result;\n\n  if (location && location.state?.target) {\n    result = location.state.target;\n    delete location.state.target;\n  } else {\n    result = '/';\n  }\n\n  return result;\n};\n\nexport const ProtectedRouteUnAuth: FC<iProtectedRouteAuth> = ({\n  children,\n  ...rest\n}) => {\n  const { name } = useSelector((store) => store.auth);\n  const render = ({\n    location,\n    history,\n  }: {\n    location: { state: { target?: string } };\n    history: ReactNode;\n  }) => {\n    if (!name) {\n      return children;\n    }\n\n    return <Redirect to={getNextPage(location, history)} />;\n  };\n\n  return <Route {...rest} render={render} />;\n};\n","import { FC } from 'react';\nimport style from './modal-overlay.module.css';\ninterface IModalOverlay {\n  closeModal: () => void;\n}\n\nconst ModalOverlay:FC<IModalOverlay> = ({ closeModal }) => (\n  <div className={style.overlay} onClick={closeModal}></div>\n);\nexport default ModalOverlay;\n","export const CLOSE_MODAL = 'CLOSE_MODAL';\n","import ReactDOM from 'react-dom';\nimport { useEffect, FC, ReactNode } from 'react';\nimport ModalOverlay from '../modal-overlay/modal-overlay';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './modal.module.css';\nimport { CLOSE_MODAL } from '../../services/constants/modal';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\ninterface IModalProps {\n  headerText?: string;\n  children: ReactNode;\n  back: string;\n}\nconst modalContainer = document.getElementById('modal');\nconst Modal: FC<IModalProps> = ({ children, headerText, back }) => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const closeModal = () => {\n    dispatch({\n      type: CLOSE_MODAL,\n    });\n    history.push(back);\n  };\n  const closeModalsByEscape = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      closeModal();\n    }\n  };\n  useEffect(() => {\n    document.addEventListener('keydown', closeModalsByEscape);\n    return () => {\n      document.removeEventListener('keydown', closeModalsByEscape);\n    };\n  });\n  return modalContainer ? ReactDOM.createPortal(\n    (<>\n      <div className={style.modal}>\n        <header className={style.header}>\n          <p className='text text_type_main-large'>{headerText}</p>\n          <CloseIcon type='primary' onClick={closeModal} />\n        </header>\n        {children}\n      </div>\n      <ModalOverlay closeModal={closeModal}></ModalOverlay>\n    </>),\n    modalContainer) : null\n};\n\nexport default Modal;\n","import { useMemo, FC } from 'react';\nimport style from './burger-ingredient.module.css';\nimport { TIngredient } from '../../services/types';\nimport {\n  Counter,\n  CurrencyIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector } from '../../services/hooks';\nimport { useDrag } from 'react-dnd';\nimport { Link, useLocation } from 'react-router-dom';\ninterface IBurgerIngredient {\n  ingredient: TIngredient;\n}\nconst BurgerIngredient: FC<IBurgerIngredient> = ({ ingredient }) => {\n  const location = useLocation();\n  const {\n    constructorIngredients,\n    constructorBun,\n  }: {\n    constructorIngredients: Array<TIngredient & { key: number }>;\n    constructorBun: TIngredient;\n  } = useSelector((state) => state.constructor);\n  const [, dragRef] = useDrag({\n    type: 'Ingredient',\n    item: { ingredient },\n    collect: (monitor) => ({\n      isDrag: monitor.isDragging(),\n    }),\n  });\n  const count = useMemo(() => {\n    if (!constructorIngredients) {\n      return null;\n    }\n    if (constructorIngredients) {\n      return [...constructorIngredients, constructorBun, constructorBun].filter(\n        (item) => item?.name === ingredient.name\n      ).length;\n    } else {\n      return (\n        [constructorBun].filter((item) => item?.name === ingredient.name)\n          .length * 2\n      );\n    }\n  }, [constructorIngredients, constructorBun, ingredient.name]);\n  return (\n    <Link\n      to={{\n        pathname: `/ingredients/${ingredient._id}`,\n        state: { background: location },\n      }}\n      className={style.cardIngredient}\n      ref={dragRef}\n      data-test='ingredient'\n    >\n      {count ? <Counter count={count} size='default' /> : null}\n      <img src={ingredient.image} alt={ingredient.name} />\n      <div className={style.price}>\n        <span className='text text_type_digits-default pr-2'>\n          {ingredient.price}\n        </span>\n        <CurrencyIcon type='primary' />\n      </div>\n      <p className='text text_type_main-default pb-4'>{ingredient.name}</p>\n    </Link>\n  );\n};\nexport default BurgerIngredient;\n","import style from './burger-ingredients.module.css';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport BurgerIngredient from '../burger-ingredient/burger-ingredient';\nimport { useSelector } from '../../services/hooks';\nimport { useState, useCallback, useRef } from 'react';\nconst BurgerIngredients = () => {\n  const { ingredients } = useSelector((state) => state.ingredients);\n  const [tab, setTab] = useState('bun');\n\n  const wrapperRef = useRef<HTMLDivElement>(null),\n    bunRef = useRef<HTMLDivElement>(null),\n    sauceRef = useRef<HTMLDivElement>(null),\n    mainRef = useRef<HTMLDivElement>(null);\n\n  const handleTab = (value: string, ref: typeof bunRef | typeof sauceRef | typeof mainRef) => () => {\n    setTab(value);\n    if (!ref.current) {return null}\n    if (bunRef.current && sauceRef.current && mainRef.current) {\n      ref.current.scrollIntoView({ block: 'start', behavior: 'smooth' });\n    }\n  }\n\n  const handlerScrollBar = useCallback(() => {\n    if (!wrapperRef.current || !bunRef.current || !sauceRef.current) { return null}\n    if (\n      Math.ceil(wrapperRef.current.scrollTop) <\n      bunRef.current.scrollHeight / 2\n    ) {\n      setTab('bun');\n    } else if (\n      Math.ceil(wrapperRef.current.scrollTop) <\n      bunRef.current.scrollHeight + sauceRef.current.scrollHeight / 2\n    ) {\n      setTab('sauce');\n    } else {\n      setTab('main');\n    }\n  }, []);\n\n  return (\n    <section className={style.burgerIngredients}>\n      <h1 className='text text_type_main-large'>Собери бургер</h1>\n      <div className={`${style.tabs} mt-5 mb-5`}>\n        <div className={style.tab} >\n          <Tab value='bun' active={tab === 'bun'} onClick={handleTab('bun', bunRef)}>\n            Булки\n          </Tab>\n        </div>\n        <div className={style.tab} >\n          <Tab value='sauce' active={tab === 'sauce'} onClick={handleTab('sauce', sauceRef)}>\n            Соусы\n          </Tab>\n        </div>\n        <div className={style.tab} >\n          <Tab value='main' active={tab === 'main'} onClick={handleTab('main', mainRef)}>\n            Начинки\n          </Tab>\n        </div>\n      </div>\n      <div\n        className={style.wrapperAllIngredients}\n        onScroll={handlerScrollBar}\n        ref={wrapperRef}\n      >\n        <div className={style.allIngredients}>\n          <h2 className='text text_type_main-medium'>Булки</h2>\n          <div className={style.cardsIngredients} ref={bunRef}>\n            {ingredients.map(\n              (item) =>\n                item.type === 'bun' && (\n                  <BurgerIngredient ingredient={item} key={item._id} />\n                )\n            )}\n          </div>\n        </div>\n        <div className={style.allIngredients}>\n          <h2 className='text text_type_main-medium'>Соусы</h2>\n          <div className={style.cardsIngredients} ref={sauceRef}>\n            {ingredients.map(\n              (item) =>\n                item.type === 'sauce' && (\n                  <BurgerIngredient ingredient={item} key={item._id} />\n                )\n            )}\n          </div>\n        </div>\n        <div className={style.allIngredients}>\n          <h2 className='text text_type_main-medium'>Начинки</h2>\n          <div className={style.cardsIngredients} ref={mainRef}>\n            {ingredients.map(\n              (item) =>\n                item.type === 'main' && (\n                  <BurgerIngredient ingredient={item} key={item._id} />\n                )\n            )}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default BurgerIngredients;\n","export const MOVE_CONSTRUCTOR_ITEM = 'MOVE_CONSTRUCTOR_ITEM';\nexport const ADD_CONSTRUCTOR_INGREDIENT = 'ADD_CONSTRUCTOR_INGREDIENT';\nexport const DEL_CONSTRUCTOR_INGREDIENT = 'DEL_CONSTRUCTOR_INGREDIENT';\n","export const ADD_ORDER_REQUEST = 'ADD_ORDER_REQUEST';\nexport const ADD_ORDER_SUCCESS = 'ADD_ORDER_SUCCESS';\nexport const ADD_ORDER_ERROR = 'CLEAR_SELECTED__ERROR';\n","import { FC, useRef } from 'react';\nimport {\n  ConstructorElement,\n  DragIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './add-ingredient.module.css';\nimport { useDrag, useDrop, XYCoord } from 'react-dnd';\nimport { useDispatch } from '../../services/hooks';\nimport { moveConstructorItem } from '../../services/actions/constructor';\nimport { DEL_CONSTRUCTOR_INGREDIENT } from '../../services/constants/constructor';\nimport { TIngredient } from '../../services/types';\ninterface IAddIngredient {\n  name: string;\n  price: number;\n  image: string;\n  id: string;\n  index: number;\n}\nconst AddIngredient: FC<IAddIngredient> = ({\n  name,\n  price,\n  image,\n  id,\n  index,\n}) => {\n  const dispatch = useDispatch();\n  const ref = useRef<HTMLLIElement>(null);\n  const [{ handlerId }, dropRef] = useDrop({\n    accept: 'swap-ingredient',\n    collect: (monitor) => {\n      return {\n        handlerId: monitor.getHandlerId(),\n      };\n    },\n    hover(item: TIngredient & { index: number }, monitor) {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const clientOffset = monitor.getClientOffset();\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      dispatch(moveConstructorItem({ dragIndex, hoverIndex }));\n\n      item.index = hoverIndex;\n    },\n  });\n\n  const [{ isDragging }, dragRef] = useDrag({\n    type: 'swap-ingredient',\n    item: { id: id, index: index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  dragRef(dropRef(ref));\n  const opacity = isDragging ? 0 : 1;\n\n  const removeAddIngredient = () =>\n    dispatch({\n      type: DEL_CONSTRUCTOR_INGREDIENT,\n      index: index,\n    });\n  return (\n    <li\n      className={style.wrapper}\n      ref={ref}\n      style={{ opacity }}\n      data-handler-id={handlerId}\n    >\n      <DragIcon type='primary' />\n      <ConstructorElement\n        text={name}\n        price={price}\n        thumbnail={image}\n        handleClose={() => removeAddIngredient()}\n      />\n    </li>\n  );\n};\nexport default AddIngredient;\n","import { TIngredient } from '../types';\nimport { MOVE_CONSTRUCTOR_ITEM, ADD_CONSTRUCTOR_INGREDIENT,\n  DEL_CONSTRUCTOR_INGREDIENT, } from '../constants/constructor';\n  import { ADD_ORDER_SUCCESS } from './order';\nexport {MOVE_CONSTRUCTOR_ITEM, ADD_CONSTRUCTOR_INGREDIENT,\n  DEL_CONSTRUCTOR_INGREDIENT, ADD_ORDER_SUCCESS };\n\ninterface IMoveConstructorItemAction {readonly type: typeof MOVE_CONSTRUCTOR_ITEM; readonly dragIndex: number; readonly hoverIndex: number;}\ninterface IAddConstructorIngredientAction {readonly type: typeof ADD_CONSTRUCTOR_INGREDIENT; readonly ingredient: TIngredient; readonly randomId: number;}\ninterface IDelConstructorIngredientAction {readonly type: typeof DEL_CONSTRUCTOR_INGREDIENT; readonly index: number;}\ninterface IAddOrderSuccessAction {readonly type: typeof ADD_ORDER_SUCCESS;}\nexport type TConstructorAction = IMoveConstructorItemAction | IAddConstructorIngredientAction | IDelConstructorIngredientAction | IAddOrderSuccessAction\nexport const moveConstructorItem = ({ dragIndex, hoverIndex }:{dragIndex: number, hoverIndex: number}) => ({\n  type: MOVE_CONSTRUCTOR_ITEM,\n  dragIndex,\n  hoverIndex,\n});\n","import { useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  ConstructorElement,\n  Button,\n  CurrencyIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport AddIngredient from '../constructor-ingredient/add-ingredient';\nimport style from './burger-constructor.module.css';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { ADD_CONSTRUCTOR_INGREDIENT } from '../../services/constants/constructor';\nimport { handleAddOrder } from '../../services/actions/order';\nimport { useDrop } from 'react-dnd';\nimport { TIngredient } from '../../services/types';\n\nconst BurgerConstructor = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const hasToken = localStorage.getItem('refreshToken');\n  const {\n    constructorIngredients,\n    constructorBun,\n  }: {\n    constructorIngredients: Array<TIngredient & { key: number }>;\n    constructorBun: TIngredient;\n  } = useSelector((state) => state.constructor);\n  const { orderRequest } = useSelector((state) => state.order);\n  const [, dropTarget] = useDrop({\n    accept: 'Ingredient',\n    drop(ingredient: Array<TIngredient>) {\n      dispatch({\n        type: ADD_CONSTRUCTOR_INGREDIENT,\n        ...ingredient,\n        randomId: Math.round(Math.random() * 1000),\n      });\n    },\n  });\n\n  const idForOrder = () => {\n    const fullList = [...constructorIngredients, constructorBun];\n    return fullList && fullList.map((item: TIngredient) => item._id);\n  };\n  const calculate = (\n    constructorIngredients: Array<TIngredient>,\n    constructorBun: TIngredient\n  ) => {\n    if (constructorIngredients && constructorBun) {\n      return constructorIngredients.reduce(\n        (result: number, item: { price: number }) => result + item.price,\n        constructorBun?.price * 2\n      );\n    } else if (constructorBun) return constructorBun?.price * 2;\n    else\n      return constructorIngredients?.reduce(\n        (result: number, item: { price: number }) => result + item.price,\n        0\n      );\n  };\n  const totalPrice = useMemo(\n    () => calculate(constructorIngredients, constructorBun),\n    [constructorIngredients, constructorBun]\n  );\n\n  return (\n    <section\n      className={style.burgerConstructor + ' pl-4'}\n      ref={dropTarget}\n      data-test='dropTarget'\n    >\n      {constructorIngredients || constructorBun ? (\n        <>\n          {constructorBun && (\n            <div className={style.bun} data-test='container-bun-up'>\n              <ConstructorElement\n                type='top'\n                isLocked={true}\n                text={`${constructorBun.name} (верх)`}\n                price={constructorBun.price}\n                thumbnail={constructorBun?.image}\n              />\n            </div>\n          )}\n          {constructorIngredients ? (\n            <ul className={style.dopElement} data-test='container'>\n              {constructorIngredients.map((item, index) => (\n                <AddIngredient\n                  name={item.name}\n                  price={item.price}\n                  image={item.image}\n                  id={item._id}\n                  index={index}\n                  key={item.key}\n                />\n              ))}\n            </ul>\n          ) : (\n            <p className='text text_type_main-medium text_color_inactive'>\n              Может хоты бы кетчуп?\n            </p>\n          )}\n          {constructorBun && (\n            <div className={style.bun} data-test='container-bun-down'>\n              <ConstructorElement\n                type='bottom'\n                isLocked={true}\n                text={`${constructorBun.name} (низ)`}\n                price={constructorBun.price}\n                thumbnail={constructorBun.image}\n              />\n            </div>\n          )}\n\n          <div className={style.finalPrice}>\n            <div className={style.price}>\n              <span className='text text_type_digits-medium'>{totalPrice}</span>\n              <CurrencyIcon type='primary' />\n            </div>\n            {constructorBun && constructorIngredients ? (\n              <>\n                {orderRequest ? (\n                  <p className='text text_type_main-medium text_color_inactive'>\n                    Подождите отправляем на кухню\n                  </p>\n                ) : (\n                  <Button\n                    type='primary'\n                    size='large'\n                    onClick={\n                      hasToken\n                        ? () => dispatch(handleAddOrder(idForOrder()))\n                        : () => history.replace('/login')\n                    }\n                  >\n                    Оформить заказ\n                  </Button>\n                )}\n              </>\n            ) : constructorIngredients ? (\n              <p className='text text_type_main-medium text_color_inactive'>\n                И булку не забудь\n              </p>\n            ) : (\n              <p className='text text_type_main-medium text_color_inactive'>\n                Добавь начинку\n              </p>\n            )}\n          </div>\n        </>\n      ) : (\n        <>\n          <div\n            className='text text_type_main-default text_color_inactive'\n            style={{ paddingLeft: '70px' }}\n          >\n            <p>Давай собери уже свой бургер!</p>\n            <p>Перетаскивай сюда всё что хочешь!</p>\n            <p>И булку не забудь.</p>\n            <p>Бургер без булки, как окрошка без кваса - салат.</p>\n          </div>\n        </>\n      )}\n    </section>\n  );\n};\n\nexport default BurgerConstructor;\n","import { url, checkResponse } from '../api';\nimport { getCookie } from '../utils';\nimport { AppThunk } from '../types';\nimport {\n  ADD_ORDER_REQUEST,\n  ADD_ORDER_SUCCESS,\n  ADD_ORDER_ERROR,\n} from '../constants/order';\nexport { ADD_ORDER_REQUEST, ADD_ORDER_SUCCESS, ADD_ORDER_ERROR };\n\ninterface IAddOrderRequestAction {readonly type: typeof ADD_ORDER_REQUEST}\ninterface IAddOrderSuccessAction {readonly type: typeof ADD_ORDER_SUCCESS; readonly order: number;}\ninterface IAddOrderErrorAction {readonly type: typeof ADD_ORDER_ERROR}\n\nexport type TAddOrderAction = IAddOrderRequestAction | IAddOrderSuccessAction | IAddOrderErrorAction;\nexport const handleAddOrder:AppThunk = (listId: string[]) => (dispatch) => {\n  dispatch({\n    type: ADD_ORDER_REQUEST,\n  });\n  return fetch(`${url}orders`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + getCookie('token'),\n    },\n    body: JSON.stringify({\n      ingredients: listId,\n    }),\n  })\n    .then((response) => checkResponse(response))\n    .then((result) =>\n      dispatch({\n        type: ADD_ORDER_SUCCESS,\n        order: result.order.number,\n      })\n    )\n    .catch(() => {\n      dispatch({\n        type: ADD_ORDER_ERROR,\n      });\n    });\n};\n","import { CheckMarkIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './order-details.module.css';\nimport { useSelector } from '../../services/hooks';\nconst OrderDetails = () => {\n  const { order } = useSelector((state) => state.order);\n  return (\n    <section className={style.order}>\n      <span className='text text_type_digits-large mb-8'>{order}</span>\n      <span className='text text_type_main-medium mb-15'>\n        идентификатор заказа\n      </span>\n      <div className={style.done + ' mb-15'}>\n        <CheckMarkIcon type='primary' />\n      </div>\n\n      <span className='text text_type_main-default mb-2'>\n        Ваш заказ начали готовить\n      </span>\n      <span className='text text_type_main-default text_color_inactive mb-15'>\n        Дождитесь готовности на орбитальной станции\n      </span>\n    </section>\n  );\n};\n\nexport default OrderDetails;\n","import BurgerIngredients from '../../components/burger-ingredients/burger-ingredients';\nimport BurgerConstructor from '../../components/burger-constructor/burger-constructor';\nimport Modal from '../../components/modal/modal';\nimport OrderDetails from '../../components/order-details/order-details';\nimport { useSelector } from '../../services/hooks';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nconst Main = () => {\n  const { orderSuccess, ingredientsError } = useSelector((state) => ({\n    ingredientsError: state.ingredients.ingredientsError,\n    orderSuccess: state.order.orderSuccess,\n  }));\n  return (\n    <>\n      <DndProvider backend={HTML5Backend}>\n        <BurgerIngredients />\n        <BurgerConstructor />\n      </DndProvider>\n      {orderSuccess && (\n        <Modal back={'/'}>\n          <OrderDetails />\n        </Modal>\n      )}\n      {ingredientsError && (\n        <p className='text text_type_main-medium text_color_inactive'>\n          Всё сломалось, на нас напали Тираниды\n        </p>\n      )}\n    </>\n  );\n};\nexport default Main;\n","import { useState, SyntheticEvent } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../../services/actions/auth';\nimport {\n  Input,\n  PasswordInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './login.module.css';\nimport { Link } from 'react-router-dom';\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n  const submit = (e:SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(login(email, password));\n  };\n  return (\n    <div className={style.container}>\n      <form onSubmit={submit} className={style.form}>\n        <h2 className='text text_type_main-medium'>Вход</h2>\n        <Input\n          type={'email'}\n          value={email}\n          placeholder={'E-mail'}\n          onChange={(e) => setEmail(e.target.value)}\n          name={'email'}\n        />\n        <PasswordInput\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          name={'password'}\n        />\n        <Button type='primary' size='medium'>\n          Войти\n        </Button>\n        <div className={`mt-10 ${style.nav}`}>\n          <div className='text text_type_main-default text_color_inactive'>\n            Вы — новый пользователь?\n            <Link\n              to='/register'\n              className={`text text_type_main-default pl-2 ${style.link}`}\n            >\n              Зарегистрироваться\n            </Link>\n          </div>\n          <div className='text text_type_main-default text_color_inactive pt-4'>\n            Забыли пароль?\n            <Link\n              to='/forgot-password'\n              className={`text text_type_main-default pl-2 ${style.link}`}\n            >\n              Восстановить пароль\n            </Link>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\nexport default Login;\n","import {\n  Input,\n  PasswordInput,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './register.module.css';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { registration } from '../../services/actions/auth';\nimport {SyntheticEvent} from 'react';\nconst Register = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n  const submit = (e:SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(registration(email, password, name));\n  };\n  const hasToken = localStorage.getItem('refreshToken');\n\n  if (hasToken) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/profile',\n        }}\n      />\n    );\n  }\n  return (\n    <div className={style.container}>\n      <form onSubmit={submit} className={style.form}>\n        <h2 className='text text_type_main-medium'>Регистрация</h2>\n        <Input\n          type={'text'}\n          placeholder={'Имя'}\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          name={'name'}\n        />\n        <Input\n          type={'email'}\n          placeholder={'E-mail'}\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          name={'email'}\n        />\n        <PasswordInput\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          name={'password'}\n        />\n        <Button type='primary' size='medium'>\n          Зарегистрироваться\n        </Button>\n        <div className={`mt-10 ${style.nav}`}>\n          <div className='text text_type_main-default text_color_inactive'>\n            Уже зарегистрированы?\n            <Link\n              to='/login'\n              className={`text text_type_main-default pl-2 ${style.link}`}\n            >\n              Войти\n            </Link>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\nexport default Register;\n","import {\n  Input,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './forgot.module.css';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { SyntheticEvent, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { forgot } from '../../services/actions/auth';\nconst Forgot = () => {\n  const [email, setEmail] = useState('');\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const submit = (e:SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(forgot(email, history));\n  };\n  const hasToken = localStorage.getItem('refreshToken');\n  if (hasToken) {\n    return <Redirect to={{ pathname: '/profile' }} />;\n  }\n\n  return (\n    <div className={style.container}>\n      <form onSubmit={submit} className={style.form}>\n        <h2 className='text text_type_main-medium'>Восстановление пароля</h2>\n        <Input\n          type={'email'}\n          value={email}\n          placeholder={'Укажите e-mail'}\n          onChange={(e) => setEmail(e.target.value)}\n          name={'email'}\n        />\n\n        <Button type='primary' size='medium'>\n          Восстановить\n        </Button>\n        <div className={`mt-10 ${style.nav}`}>\n          <div className='text text_type_main-default text_color_inactive'>\n            Вспомнили пароль?\n            <Link\n              to='/login'\n              className={`text text_type_main-default pl-2 ${style.link}`}\n            >\n              Войти\n            </Link>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\nexport default Forgot;\n","import {\n  Input,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport style from './reset.module.css';\nimport { Link, useHistory, Redirect } from 'react-router-dom';\nimport { useState, SyntheticEvent } from 'react';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { reset } from '../../services/actions/auth';\nconst Reset = () => {\n  const { forgotSuccess } = useSelector((state) => state.auth);\n  const [password, setPassword] = useState('');\n  const [token, setToken] = useState('');\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const submit = (e:SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(reset(password, token, history));\n  };\n  if (!forgotSuccess) {\n    return <Redirect to='/forgot-password' />;\n  }\n  return (\n    <div className={style.container}>\n      <form onSubmit={submit} className={style.form}>\n        <h2 className='text text_type_main-medium'>Восстановление пароля</h2>\n        <Input\n          icon={'ShowIcon'}\n          type={'password'}\n          name={'password'}\n          value={password}\n          placeholder={'Введите новый пароль'}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <Input\n          type={'text'}\n          placeholder={'Введите код из письма'}\n          onChange={(e) => setToken(e.target.value)}\n          name={'token'}\n          value={token}\n        />\n\n        <Button type='primary' size='medium'>\n          Сохранить\n        </Button>\n        <div className={`mt-10 ${style.nav}`}>\n          <div className='text text_type_main-default text_color_inactive'>\n            Вспомнили пароль?\n            <Link\n              to='/login'\n              className={`text text_type_main-default pl-2 ${style.link}`}\n            >\n              Войти\n            </Link>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\nexport default Reset;\n","import { NavLink, useHistory } from 'react-router-dom';\nimport { useDispatch } from '../../services/hooks';\nimport { logout } from '../../services/actions/auth';\nimport style from './nav-profile.module.css';\nconst NavProfile = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const handlerClick = () => {\n    dispatch(logout(history));\n  };\n  return (\n    <ul className='text text_type_main-medium'>\n      <li className='pt-6 pb-6'>\n        <NavLink\n          exact\n          to='/profile'\n          className='text_color_inactive'\n          activeClassName={style.active}\n        >\n          Профиль\n        </NavLink>\n      </li>\n      <li className='pt-6 pb-6'>\n        <NavLink\n          exact\n          to='/profile/orders'\n          className='text_color_inactive'\n          activeClassName={style.active}\n        >\n          История заказов\n        </NavLink>\n      </li>\n      <li\n        className={`pt-6 pb-6 text_color_inactive ${style.exit}`}\n        onClick={handlerClick}\n      >\n        Выход\n      </li>\n    </ul>\n  );\n};\n\nexport default NavProfile;\n","import { useDispatch, useSelector } from '../../services/hooks';\nimport {\n  Input,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport NavProfile from '../../components/nav-profile/nav-profile';\nimport style from './profile.module.css';\nimport { useState, useEffect, SyntheticEvent } from 'react';\nimport { user, edit } from '../../services/actions/auth';\nimport Loader from '../../components/loader/loader';\nconst Profile = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(user());\n  }, [dispatch]);\n  const defaultName = useSelector((state) => state.auth.name);\n  const defaultEmail = useSelector((state) => state.auth.email);\n  const [name, setName] = useState(defaultName);\n  const [email, setEmail] = useState(defaultEmail);\n  const [password, setPassword] = useState('');\n  useEffect(() => {\n    setName(() => defaultName);\n    setEmail(() => defaultEmail);\n  }, [defaultName, defaultEmail]);\n  const submit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(edit(email, password, name));\n  };\n  const cancel = () => {\n    setName(() => defaultName);\n    setEmail(() => defaultEmail);\n    setPassword('');\n  };\n  if (!defaultName) return <Loader />;\n  return (\n    <div className={`${style.container} mt-30`}>\n      <nav className={style.nav}>\n        <NavProfile />\n        <p className='text text_type_main-default text_color_inactive mt-20'>\n          В этом разделе вы можете\n          <br /> изменить свои персональные данные\n        </p>\n      </nav>\n      <form className={style.form} onSubmit={submit}>\n        <Input\n          type={'text'}\n          placeholder={'Имя'}\n          onChange={(e) => setName(e.target.value)}\n          icon={'EditIcon'}\n          value={name}\n          name={'name'}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Input\n          type={'text'}\n          placeholder={'Логин'}\n          onChange={(e) => setEmail(e.target.value)}\n          icon={'EditIcon'}\n          value={email}\n          name={'login'}\n          size={'default'}\n        />\n        <Input\n          type={'password'}\n          placeholder={'Пароль'}\n          onChange={(e) => {\n            setPassword(e.target.value);\n          }}\n          icon={'EditIcon'}\n          value={password}\n          name={'password'}\n          size={'default'}\n        />\n        {name !== defaultName || email !== defaultEmail || password ? (\n          <div className={style.buttons}>\n            <button\n              className={`${style.button} text text_type_main-default`}\n              type='reset'\n              onClick={cancel}\n            >\n              Отмена\n            </button>\n            <Button type='primary' size='medium'>\n              Сохранить\n            </Button>\n          </div>\n        ) : null}\n      </form>\n    </div>\n  );\n};\nexport default Profile;\n","import { FC } from 'react';\nimport style from './icon-ingredient.module.css';\ninterface IIconIngredient {\n  style?: { left: number; zIndex: number };\n  img: string | undefined;\n  inf?: string;\n}\nconst IconIngredient: FC<IIconIngredient> = (props) => {\n  return (\n    <div className={style.pict} style={props.style}>\n      <img className={style.img} src={props.img} alt='ingredient' />\n      {props.inf && (\n        <div className={`${style.inf} text text_type_main-default`}>\n          {props.inf}\n        </div>\n      )}\n    </div>\n  );\n};\nexport default IconIngredient;\n","import style from './order-blank-history.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport IconIngredient from '../icon-ingredient/icon-ingredient';\nimport { transformDate, showStatus } from '../../services/utils';\nimport { useSelector } from '../../services/hooks';\nimport { TOrder } from '../../services/types';\nexport const OrderBlankHistory = ({\n  number,\n  name,\n  createdAt,\n  status,\n  ingredients,\n}: TOrder) => {\n  const ingredientsCatalog = useSelector(\n    (state) => state.ingredients.ingredients\n  );\n  const orderIngredients = ingredients?.map((id) => {\n    return ingredientsCatalog.find((item) => item._id === id);\n  });\n  const total = orderIngredients.length;\n  const price =\n    orderIngredients &&\n    orderIngredients?.reduce((sum, item) => {\n      return sum + (item?.price || 0);\n    }, 0);\n  const singleStatus = showStatus(status);\n\n  return (\n    <div className={style.base}>\n      <div className={style.id}>\n        <div className='text text_type_digits-default'>#{number}</div>\n        <div className='text text_type_main-default text_color_inactive'>\n          {transformDate(createdAt)}\n        </div>\n      </div>\n\n      <div className='text text_type_main-medium pt-6'>{name}</div>\n      <div className={`${style.status} text text_type_main-default pt-3`}>\n        <span style={{ color: singleStatus?.color }}>\n          {singleStatus?.orderStatus}\n        </span>\n      </div>\n      <div className={`${style.info} pt-6`}>\n        <div>\n          <div className={style.group}>\n            {orderIngredients\n              .slice(0, 6)\n              .map((item, i) =>\n                i === 5 ? (\n                  <IconIngredient\n                    key={i}\n                    inf={`+${total - 5}`}\n                    img={item?.image_mobile}\n                    style={{ left: i * -15, zIndex: 5 - i }}\n                  />\n                ) : (\n                  <IconIngredient\n                    key={i}\n                    img={item?.image_mobile}\n                    style={{ left: i * -15, zIndex: 5 - i }}\n                  />\n                )\n              )}\n          </div>\n        </div>\n        <div className={`${style.price} text text_type_digits-default`}>\n          <span>{price}</span> <CurrencyIcon type='primary' />\n        </div>\n      </div>\n    </div>\n  );\n};\n","export const WS_CONNECTION_PRIVATE_START = 'WS_CONNECTION_PRIVATE_START';\nexport const WS_CONNECTION_PRIVATE_SUCCESS = 'WS_CONNECTION_PRIVATE_SUCCESS';\nexport const WS_CONNECTION_PRIVATE_ERROR = 'WS_CONNECTION_PRIVATE_ERROR';\nexport const WS_CONNECTION_PRIVATE_CLOSED = 'WS_CONNECTION_PRIVATE_CLOSED';\nexport const WS_GET_MESSAGE_PRIVATE = 'WS_GET_MESSAGE_PRIVATE';\nexport const WS_SEND_MESSAGE_PRIVATE = 'WS_SEND_MESSAGE_PRIVATE';\n","import { useEffect } from 'react';\nimport style from './history.module.css';\nimport NavProfile from '../../components/nav-profile/nav-profile';\nimport { OrderBlankHistory } from '../../components/order-blank-history/order-blank-history';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport {\n  WS_CONNECTION_PRIVATE_START,\n  WS_CONNECTION_PRIVATE_CLOSED,\n} from '../../services/constants/ws-private';\nimport { TOrder } from '../../services/types';\nconst History = () => {\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const { messages } = useSelector((store) => store.wsPrivate);\n  useEffect(() => {\n    dispatch({ type: WS_CONNECTION_PRIVATE_START });\n    return () => {\n      dispatch({ type: WS_CONNECTION_PRIVATE_CLOSED });\n    };\n  }, [dispatch]);\n  return (\n    <div className={`${style.container} mt-10`}>\n      <nav className={style.nav}>\n        <NavProfile />\n        <p className='text text_type_main-default text_color_inactive mt-20'>\n          В этом разделе вы можете просмотреть свою историю заказов\n        </p>\n      </nav>\n      <div className={style.feed}>\n        {messages &&\n          messages?.orders?.map((item: TOrder) => (\n            <Link\n              key={item._id}\n              to={{\n                pathname: `/profile/orders/${item._id}`,\n                state: { background: location },\n              }}\n            >\n              <OrderBlankHistory {...item} status={item.status} />\n            </Link>\n          ))}\n      </div>\n    </div>\n  );\n};\nexport default History;\n","import style from './info-total-orders.module.css';\nimport { useSelector } from '../../services/hooks';\nimport { TOrder } from '../../services/types';\nexport const InfoTotalOrders = () => {\n  const { totalToday, total, orders } = useSelector(\n    (store) => store.ws.messages\n  );\n  const readyOrders = orders?.filter((item: TOrder) => item.status === 'done');\n\n  const upcomingOrders = orders?.filter(\n    (item: TOrder) => item.status !== 'done'\n  );\n  return (\n    <div className={style.info}>\n      <div className={style.stage}>\n        <div className={`${style.wrapper} text text_type_main-medium`}>\n          Готовы:\n          <ul className={`${style.ready} pt-6 text text_type_digits-default`}>\n            {readyOrders?.slice(0, 20).map((item: TOrder) => (\n              <li key={item._id}>{item.number}</li>\n            ))}\n          </ul>\n        </div>\n        <div className={`${style.wrapper} text text_type_main-medium`}>\n          В работе:\n          <ul className='pt-6 text text_type_digits-default'>\n            {upcomingOrders?.map((item: TOrder) => (\n              <li key={item._id}>{item.number}</li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <div className='text text_type_main-medium'>\n        Выполнено за всё время:\n        <div className={`${style.total} text text_type_digits-large`}>\n          {total}\n        </div>\n      </div>\n      <div className='text text_type_main-medium'>\n        Выполнено за сегодня:\n        <div className={`${style.total} text text_type_digits-large`}>\n          {totalToday}\n        </div>\n      </div>\n    </div>\n  );\n};\n","export const WS_CONNECTION_START = 'WS_CONNECTION_START';\nexport const WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS';\nexport const WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR';\nexport const WS_CONNECTION_CLOSED = 'WS_CONNECTION_CLOSED';\nexport const WS_GET_MESSAGE = 'WS_GET_MESSAGE';\nexport const WS_SEND_MESSAGE = 'WS_SEND_MESSAGE';\n","import { useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport style from './feed.module.css';\nimport { OrderBlankHistory } from '../../components/order-blank-history/order-blank-history';\nimport { InfoTotalOrders } from '../../components/info-total-orders/info-total-orders';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSED,\n} from '../../services/constants/ws';\nimport { TOrder } from '../../services/types';\nconst Feed = () => {\n  const location = useLocation();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch({ type: WS_CONNECTION_START });\n    return () => {\n      dispatch({ type: WS_CONNECTION_CLOSED });\n    };\n  }, [dispatch]);\n  const { messages } = useSelector((store) => store.ws);\n  return (\n    <>\n      <main>\n        <h1 className='text text_type_main-large mt-10 mb-5'>Лента заказов</h1>\n        <div className={style.content}>\n          <div className={`${style.feed} pr-2`}>\n            {messages &&\n              messages?.orders?.slice(0, 20).map((item: TOrder) => (\n                <Link\n                  key={item._id}\n                  to={{\n                    pathname: `/feed/${item._id}`,\n                    state: { background: location },\n                  }}\n                >\n                  <OrderBlankHistory {...item} status={''} />\n                </Link>\n              ))}\n          </div>\n          <InfoTotalOrders />\n        </div>\n      </main>\n    </>\n  );\n};\nexport default Feed;\n","import style from './item-in-order.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport IconIngredient from '../icon-ingredient/icon-ingredient';\nimport { FC } from 'react';\nimport { TIngredient } from '../../services/types';\nconst ItemInOrder: FC<TIngredient> = ({ name, price, image_mobile }) => {\n  return (\n    <li className={style.item}>\n      <IconIngredient img={image_mobile} />\n      <div className={`${style.name} text text_type_main-default`}>{name}</div>\n      <div className={`${style.price} text text_type_digits-default`}>\n        <span>{price}</span>\n        <CurrencyIcon type='primary' />\n      </div>\n    </li>\n  );\n};\nexport default ItemInOrder;\n","import { useEffect } from 'react';\nimport style from './single-order.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport ItemInOrder from '../../components/item-in-order/item-in-order';\nimport { useSelector, useDispatch } from '../../services/hooks';\nimport { useParams, useRouteMatch } from 'react-router-dom';\nimport { transformDate, showStatus } from '../../services/utils';\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSED,\n} from '../../services/constants/ws';\nimport {\n  WS_CONNECTION_PRIVATE_START,\n  WS_CONNECTION_PRIVATE_CLOSED,\n} from '../../services/constants/ws-private';\nimport Loader from '../../components/loader/loader';\nconst SingleOrder = () => {\n  const isProfile = !!useRouteMatch('/profile');\n  const dispatch = useDispatch();\n  const { id } = useParams<{ id: string }>();\n  useEffect(() => {\n    dispatch(\n      isProfile\n        ? { type: WS_CONNECTION_PRIVATE_START }\n        : { type: WS_CONNECTION_START }\n    );\n    return () => {\n      dispatch(\n        isProfile\n          ? { type: WS_CONNECTION_PRIVATE_CLOSED }\n          : { type: WS_CONNECTION_CLOSED }\n      );\n    };\n  }, [dispatch, isProfile]);\n\n  const { catalog, orders } = useSelector((state) => ({\n    orders: isProfile\n      ? state.wsPrivate.messages.orders\n      : state.ws.messages.orders,\n    catalog: state.ingredients.ingredients,\n  }));\n  const selectedOrder = orders && orders.find((item) => item._id === id);\n  const listId = orders && selectedOrder?.ingredients;\n  const orderIngredients =\n    orders &&\n    listId?.map((id: string) => {\n      return catalog.find((item) => item._id === id);\n    });\n  const price =\n    orders &&\n    orderIngredients?.reduce((sum, item) => {\n      return sum + (item?.price || 0);\n    }, 0);\n  const status = selectedOrder && showStatus(selectedOrder.status);\n\n  return selectedOrder ? (\n    <div className={style.container}>\n      <div className={`${style.id} text text_type_digits-default`}>\n        #{selectedOrder.number}\n      </div>\n      <div className='text text_type_main-medium pt-10'>\n        {selectedOrder.name}\n      </div>\n      <div className={`${style.status} text text_type_main-default pt-3`}>\n        <span style={{ color: status?.color }}>{status?.orderStatus}</span>\n      </div>\n      <div className='text text_type_main-medium pt-15'>Cотав:</div>\n      <ul className={`${style.wrapper} pt-6`}>\n        {orderIngredients &&\n          orderIngredients.map((item, i) =>\n            item ? <ItemInOrder key={i} {...item} /> : null\n          )}\n      </ul>\n      <div className={`${style.footer} pt-10`}>\n        <span className='text text_type_main-default text_color_inactive'>\n          {transformDate(selectedOrder.createdAt)}\n        </span>\n        <span className={`${style.price} text text_type_digits-default`}>\n          {price}\n          <CurrencyIcon type='primary' />\n        </span>\n      </div>\n    </div>\n  ) : (\n    <Loader />\n  );\n};\nexport default SingleOrder;\n","export const GET_INGREDIENTS_REQUEST = 'GET_INGREDIENTS_REQUEST';\nexport const GET_INGREDIENTS_SUCCESS = 'GET_INGREDIENTS_SUCCESS';\nexport const GET_INGREDIENTS_ERROR = 'GET_INGREDIENTS_ERROR';\n","import { useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  useLocation,\n  useHistory,\n} from 'react-router-dom';\nimport style from './app.module.css';\nimport AppHeader from '../app-header/app-header';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport {\n  ProtectedRouteAuth,\n  ProtectedRouteUnAuth,\n} from '../protected-route/protected-route';\nimport Modal from '../modal/modal';\nimport {\n  Main,\n  Login,\n  Register,\n  Forgot,\n  Reset,\n  Profile,\n  History,\n  Feed,\n  SingleOrder,\n} from '../../pages';\nimport { useSelector, useDispatch } from '../../services/hooks';\nimport { getIngredients } from '../../services/actions/ingredients';\nimport Loader from '../loader/loader';\nimport { refresh } from '../../services/actions/auth';\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getIngredients());\n    dispatch(refresh());\n  }, [dispatch]);\n  const { ingredientsSuccess } = useSelector((store) => store.ingredients);\n  const ModalSwitch = () => {\n    const location = useLocation();\n    const history = useHistory();\n    const background =\n      history.action === 'PUSH' && location.state && location.state.background;\n    return (\n      <>\n        <AppHeader />\n        <main className={style.main}>\n          <Switch location={background || location}>\n            <Route path='/' exact>\n              <Main />\n            </Route>\n            <ProtectedRouteUnAuth path='/login' exact>\n              <Login />\n            </ProtectedRouteUnAuth>\n            <ProtectedRouteUnAuth path='/register' exact>\n              <Register />\n            </ProtectedRouteUnAuth>\n            <ProtectedRouteUnAuth path='/forgot-password' exact>\n              <Forgot />\n            </ProtectedRouteUnAuth>\n            <ProtectedRouteUnAuth path='/reset-password' exact>\n              <Reset />\n            </ProtectedRouteUnAuth>\n            <Route path='/feed' exact>\n              <Feed />\n            </Route>\n            <Route path='/feed/:id' exact>\n              <SingleOrder />\n            </Route>\n            <ProtectedRouteAuth path='/profile' exact>\n              <Profile />\n            </ProtectedRouteAuth>\n            <ProtectedRouteAuth path='/profile/orders' exact>\n              <History />\n            </ProtectedRouteAuth>\n            <ProtectedRouteAuth path='/profile/orders/:id' exact>\n              <SingleOrder />\n            </ProtectedRouteAuth>\n            <Route path='/ingredients/:id' exact>\n              <IngredientDetails headerText='Детали ингредиента' />\n            </Route>\n            <Route>\n              <p className='text text_type_digits-large'>\n                404\n                <span className='text text_type_main-large'>\n                  Я страница и меня нет\n                </span>\n              </p>\n            </Route>\n          </Switch>\n          {background && (\n            <>\n              <Route\n                path='/ingredients/:id'\n                children={\n                  <Modal headerText='Детали ингредиента' back={'/'}>\n                    <IngredientDetails />\n                  </Modal>\n                }\n              ></Route>\n              <Route\n                path='/feed/:id'\n                children={\n                  <Modal back={'/feed'}>\n                    <SingleOrder />\n                  </Modal>\n                }\n              ></Route>\n              <Route\n                path='/profile/orders/:id'\n                children={\n                  <Modal back={'/profile/orders'}>\n                    <SingleOrder />\n                  </Modal>\n                }\n              ></Route>\n            </>\n          )}\n        </main>\n      </>\n    );\n  };\n  if (!ingredientsSuccess) return <Loader />;\n  return (\n    <Router>\n      <ModalSwitch />\n    </Router>\n  );\n};\n\nexport default App;\n","import { url, checkResponse } from '../api';\nimport { AppThunk, TIngredient } from '../types';\nimport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_ERROR,\n} from '../constants/ingredients';\nexport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_ERROR,\n};\ninterface IGetIngredientsRequestAction {readonly type: typeof GET_INGREDIENTS_REQUEST}\ninterface IGetIngredientsSuccessAction {readonly type: typeof GET_INGREDIENTS_SUCCESS; readonly ingredients: Array<TIngredient>;}\ninterface IGetIngredientsErrorAction {readonly type: typeof GET_INGREDIENTS_ERROR}\nexport type TGetIngredientsAction = IGetIngredientsRequestAction | IGetIngredientsSuccessAction | IGetIngredientsErrorAction;\n\nexport const getIngredients:AppThunk = () => (dispatch) => {\n  dispatch({\n    type: GET_INGREDIENTS_REQUEST,\n  });\n  return fetch(`${url}ingredients`)\n    .then((response) => checkResponse(response))\n    .then((response) =>\n      dispatch({\n        type: GET_INGREDIENTS_SUCCESS,\n        ingredients: response.data,\n      })\n    )\n    .catch(() => {\n      dispatch({\n        type: GET_INGREDIENTS_ERROR,\n      });\n    });\n};\n","import {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_ERROR,\n  GET_INGREDIENTS_SUCCESS,\n  TGetIngredientsAction\n} from '../actions/ingredients';\nimport {TIngredient} from '../types';\ntype TIngredientsState = {\n  ingredientsRequest: boolean,\n  ingredientsSuccess: boolean,\n  ingredientsError: boolean,\n  ingredients: Array<TIngredient>,\n}\n\nconst initialState: TIngredientsState = {\n  ingredientsRequest: false,\n  ingredientsSuccess: false,\n  ingredientsError: false,\n  ingredients: [],\n};\n\nexport const ingredientsReducer = (state = initialState, action: TGetIngredientsAction) => {\n  switch (action.type) {\n    case GET_INGREDIENTS_REQUEST: {\n      return {\n        ...state,\n        ingredientsRequest: true,\n      };\n    }\n    case GET_INGREDIENTS_SUCCESS: {\n      return {\n        ...state,\n        ingredients: action.ingredients,\n        ingredientsRequest: false,\n        ingredientsSuccess: true,\n      };\n    }\n    case GET_INGREDIENTS_ERROR: {\n      return {\n        ...state,\n        ingredientsError: true,\n        ingredientsRequest: false,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  MOVE_CONSTRUCTOR_ITEM,\n  ADD_CONSTRUCTOR_INGREDIENT,\n  DEL_CONSTRUCTOR_INGREDIENT,\n  TConstructorAction\n} from '../actions/constructor';\nimport { ADD_ORDER_SUCCESS } from '../actions/order';\nimport {TIngredient} from '../types';\ntype TConstructorState = {\n  constructorIngredients: Array<TIngredient & {key: number}>,\n  constructorBun: TIngredient | {} ,\n};\n\nconst initialState: TConstructorState = {\n  constructorIngredients: [],\n  constructorBun: {},\n};\n\nexport const constructorReducer = (state = initialState, action: TConstructorAction) => {\n  switch (action.type) {\n    case MOVE_CONSTRUCTOR_ITEM: {\n      const dragIndex = action.dragIndex;\n      const hoverIndex = action.hoverIndex;\n      const arr = [...state.constructorIngredients];\n\n      const dragElement = arr[dragIndex];\n      const hoverElement = arr[hoverIndex];\n\n      arr[hoverIndex] = dragElement;\n      arr[dragIndex] = hoverElement;\n\n      return {\n        ...state,\n        constructorIngredients: arr,\n      };\n    }\n    case ADD_CONSTRUCTOR_INGREDIENT: {\n      if (action.ingredient.type === 'bun') {\n        return { ...state, constructorBun: action.ingredient };\n      } else if (state.constructorIngredients) {\n        return {\n          ...state,\n          constructorIngredients: [\n            ...state.constructorIngredients,\n            {\n              ...action.ingredient,\n              key: action.randomId,\n            },\n          ],\n        };\n      } else {\n        return {\n          ...state,\n          constructorIngredients: [\n            {\n              ...action.ingredient,\n              key: action.randomId,\n            },\n          ],\n        };\n      }\n    }\n    case DEL_CONSTRUCTOR_INGREDIENT: {\n      return {\n        ...state,\n        constructorIngredients: [\n          ...state.constructorIngredients.filter(\n            (item, index) => action.index !== index\n          ),\n        ],\n      };\n    }\n    case ADD_ORDER_SUCCESS: {\n      return {\n        ...state,\n        constructorIngredients: null,\n        constructorBun: null,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  ADD_ORDER_REQUEST,\n  ADD_ORDER_SUCCESS,\n  ADD_ORDER_ERROR,\n  TAddOrderAction,\n} from '../actions/order';\nimport { CLOSE_MODAL, ICloseModalAtion } from '../actions/modal';\ntype TOrderState = {\n  orderRequest: boolean,\n  orderSuccess: boolean,\n  orderFailed: boolean,\n  order: number | null,\n}\nconst initialState: TOrderState = {\n  orderRequest: false,\n  orderSuccess: false,\n  orderFailed: false,\n  order: null,\n};\n\nexport const orderReducer = (state = initialState, action: TAddOrderAction | ICloseModalAtion) => {\n  switch (action.type) {\n    case ADD_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderSuccess: false,\n        orderFailed: false,\n      };\n    }\n    case ADD_ORDER_SUCCESS: {\n      return {\n        ...state,\n        order: action.order,\n        orderRequest: false,\n        orderSuccess: true,\n        orderFailed: false,\n      };\n    }\n    case ADD_ORDER_ERROR: {\n      return {\n        ...state,\n        orderFailed: true,\n        orderRequest: false,\n        orderSuccess: false,\n      };\n    }\n    case CLOSE_MODAL: {\n      return {\n        ...state,\n        orderSuccess: false,\n        order: null,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  REGISTER_REQUEST,\n  REGISTER_SUCCESS,\n  REGISTER_ERROR,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGIN_ERROR,\n  LOGOUT_REQUEST,\n  LOGOUT_SUCCESS,\n  LOGOUT_ERROR,\n  REFRESH_REQUEST,\n  REFRESH_SUCCESS,\n  REFRESH_ERROR,\n  FORGOT_REQUEST,\n  FORGOT_SUCCESS,\n  FORGOT_ERROR,\n  RESET_REQUEST,\n  RESET_SUCCESS,\n  RESET_ERROR,\n  USER_REQUEST,\n  USER_SUCCESS,\n  USER_ERROR,\n  EDIT_REQUEST,\n  EDIT_SUCCESS,\n  EDIT_ERROR,\n} from '../constants/auth';\nimport {TAuthAction} from '../actions/auth';\n\nconst initialState = {\n  email: '',\n  password: '',\n  name: '',\n  registerRequest: false,\n  registerSuccess: false,\n  regitsterError: false,\n  loginRequest: false,\n  loginSuccess: false,\n  loginError: false,\n  logoutRequest: false,\n  logoutSuccess: false,\n  logoutError: false,\n  refreshRequest: false,\n  refreshSuccess: false,\n  refreshError: false,\n  forgotRequest: false,\n  forgotSuccess: false,\n  forgotError: false,\n  resetRequest: false,\n  resetSuccess: false,\n  resetError: false,\n  userRequest: false,\n  userSuccess: false,\n  userError: false,\n  editRequest: false,\n  editSuccess: false,\n  editError: false,\n};\nexport const authReducer = (state = initialState, action: TAuthAction) => {\n  switch (action.type) {\n    case REGISTER_REQUEST: {\n      return {\n        ...state,\n        registerRequest: true,\n        registerSuccess: false,\n        regitsterError: false,\n      };\n    }\n    case REGISTER_SUCCESS: {\n      return {\n        ...state,\n        name: action.payload.name,\n        email: action.payload.email,\n        registerRequest: false,\n        registerSuccess: true,\n        regitsterError: false,\n      };\n    }\n    case REGISTER_ERROR: {\n      return {\n        ...state,\n        registerRequest: false,\n        registerSuccess: false,\n        regitsterError: true,\n      };\n    }\n    case LOGIN_REQUEST: {\n      return {\n        ...state,\n        loginRequest: true,\n        loginSuccess: false,\n        loginError: false,\n      };\n    }\n    case LOGIN_SUCCESS: {\n      return {\n        ...state,\n        name: action.payload.name,\n        email: action.payload.email,\n        loginRequest: false,\n        loginSuccess: true,\n        loginError: false,\n      };\n    }\n    case LOGIN_ERROR: {\n      return {\n        ...state,\n        loginRequest: false,\n        loginSuccess: false,\n        loginError: true,\n      };\n    }\n    case LOGOUT_REQUEST: {\n      return {\n        ...state,\n        logoutRequest: true,\n        logoutSuccess: false,\n        logoutError: false,\n      };\n    }\n    case LOGOUT_SUCCESS: {\n      return {\n        ...state,\n        name: '',\n        email: '',\n        logoutRequest: false,\n        logoutSuccess: true,\n        logoutError: false,\n      };\n    }\n    case LOGOUT_ERROR: {\n      return {\n        ...state,\n        logoutRequest: false,\n        logoutSuccess: false,\n        logoutError: true,\n      };\n    }\n    case REFRESH_REQUEST: {\n      return {\n        ...state,\n        refreshRequest: true,\n        refreshSuccess: false,\n        refreshError: false,\n      };\n    }\n    case REFRESH_SUCCESS: {\n      return {\n        ...state,\n        refreshRequest: false,\n        refreshSuccess: true,\n        refreshError: false,\n      };\n    }\n    case REFRESH_ERROR: {\n      return {\n        ...state,\n        refreshRequest: false,\n        refreshSuccess: false,\n        refreshError: true,\n      };\n    }\n    case FORGOT_REQUEST: {\n      return {\n        ...state,\n        forgotRequest: true,\n        forgotSuccess: false,\n        forgotError: false,\n      };\n    }\n    case FORGOT_SUCCESS: {\n      return {\n        ...state,\n        forgotRequest: false,\n        forgotSuccess: true,\n        forgotError: false,\n      };\n    }\n    case FORGOT_ERROR: {\n      return {\n        ...state,\n        forgotRequest: false,\n        forgotSuccess: false,\n        forgotError: true,\n      };\n    }\n    case RESET_REQUEST: {\n      return {\n        ...state,\n        resetRequest: true,\n        resetSuccess: false,\n        resetError: false,\n      };\n    }\n    case RESET_SUCCESS: {\n      return {\n        ...state,\n        forgotSuccess: false,\n        resetRequest: false,\n        resetSuccess: true,\n        resetError: false,\n      };\n    }\n    case RESET_ERROR: {\n      return {\n        ...state,\n        resetRequest: false,\n        resetSuccess: false,\n        resetError: true,\n      };\n    }\n    case USER_REQUEST: {\n      return {\n        ...state,\n        userRequest: true,\n        userSuccess: false,\n        userError: false,\n      };\n    }\n    case USER_SUCCESS: {\n      return {\n        ...state,\n        name: action.payload.name,\n        email: action.payload.email,\n        userRequest: false,\n        userSuccess: true,\n        userError: false,\n      };\n    }\n    case USER_ERROR: {\n      return {\n        ...state,\n        userRequest: false,\n        userSuccess: false,\n        userError: true,\n      };\n    }\n    case EDIT_REQUEST: {\n      return {\n        ...state,\n        editRequest: true,\n        editSuccess: false,\n        editError: false,\n      };\n    }\n    case EDIT_SUCCESS: {\n      return {\n        ...state,\n        name: action.payload.name,\n        email: action.payload.email,\n        editRequest: false,\n        editSuccess: true,\n        editError: false,\n      };\n    }\n    case EDIT_ERROR: {\n      return {\n        ...state,\n        editRequest: false,\n        editSuccess: false,\n        editError: true,\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE,\n} from '../constants/ws';\nimport {TWsAction} from '../actions/ws';\nimport { TMessages } from '../types';\ntype TWSState = {\n  wsConnected: boolean,\n  error: null | boolean,\n  messages: TMessages ,\n}\nconst initialState: TWSState = {\n  wsConnected: false,\n  error: false,\n  messages: {\n    orders:[],\n    total: 0,\n    totalToday:0,\n  },\n};\nexport const wsReducer = (state = initialState, action: TWsAction) => {\n  switch (action.type) {\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsConnected: true,\n      };\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        wsConnected: false,\n      };\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n        wsConnected: false,\n      };\n    case WS_GET_MESSAGE:\n      return {\n        ...state,\n        messages: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","import {TWsPrivateAction} from '../actions/ws-private';\nimport { TMessages } from '../types';\nimport {\n  WS_CONNECTION_PRIVATE_SUCCESS,\n  WS_CONNECTION_PRIVATE_ERROR,\n  WS_CONNECTION_PRIVATE_CLOSED,\n  WS_GET_MESSAGE_PRIVATE,\n} from '../constants/ws-private';\ntype TWSPrivateState = {\n  wsConnected: boolean,\n  error: null | boolean,\n  messages: TMessages ,\n}\nconst initialState: TWSPrivateState = {\n  wsConnected: false,\n  error: false,\n  messages: {\n    orders:[],\n    total:0,\n    totalToday:0,\n  }, };\nexport const wsReducerPrivate = (state = initialState, action: TWsPrivateAction) => {\n  switch (action.type) {\n    case WS_CONNECTION_PRIVATE_SUCCESS:\n      return { ...state, wsConnected: true };\n    case WS_CONNECTION_PRIVATE_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        wsConnected: false };\n    case WS_CONNECTION_PRIVATE_CLOSED:\n      return { ...state, wsConnected: false };\n    case WS_GET_MESSAGE_PRIVATE:\n      return { ...state, messages: action.payload };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\nimport { ingredientsReducer } from './ingredients';\nimport { constructorReducer } from './constructor';\nimport { orderReducer } from './order';\nimport { authReducer } from './auth';\nimport { wsReducer } from './ws';\nimport { wsReducerPrivate } from './ws-private';\n\nexport const rootReducer = combineReducers({\n  ingredients: ingredientsReducer,\n  order: orderReducer,\n  constructor: constructorReducer,\n  auth: authReducer,\n  ws: wsReducer,\n  wsPrivate: wsReducerPrivate,\n});\n","import { MiddlewareAPI, AnyAction } from 'redux';\nimport { TWsActions } from '../actions/ws';\nimport {TWsPrivateActions} from '../actions/ws-private';\nimport { getCookie } from '../utils';\n\nexport const socketMiddleware = (wsUrl: string, wsActions: TWsActions | TWsPrivateActions, auth: boolean) => {\n  return (store:MiddlewareAPI) => {\n    let socket: WebSocket | null = null;\n    return (next: (i: AnyAction)=> void) => (action: AnyAction) => {\n      const { dispatch } = store;\n      const { type, payload } = action;\n      const { wsInit, wsSendMessage, onOpen, onClose, onError, onMessage } =\n        wsActions;\n      const token = auth ? getCookie('token') : null;\n      if (type === wsInit) {\n        socket = token\n          ? new WebSocket(`${wsUrl}?token=${token}`)\n          : new WebSocket(`${wsUrl}`);\n      }\n      if (socket) {\n        socket.onopen = (event) => {\n          dispatch({ type: onOpen, payload: event });\n        };\n        socket.onerror = (event) => {\n          dispatch({ type: onError, payload: event });\n        };\n        socket.onmessage = (event) => {\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n          const { success, ...restParsedData } = parsedData;\n          dispatch({ type: onMessage, payload: restParsedData });\n        };\n        socket.onclose = (event) => {\n          dispatch({ type: onClose, payload: event });\n        };\n        if (type === wsSendMessage) {\n          const message = token ? { ...payload, token } : { ...payload };\n          socket.send(JSON.stringify(message));\n        }\n      }\n      next(action);\n    };\n  };\n};\n","import {\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE,\n  WS_SEND_MESSAGE,\n} from '../constants/ws';\nimport { TMessages } from '../types';\n\nexport const wsActions = {\n  wsInit: WS_CONNECTION_START as typeof WS_CONNECTION_START,\n  onOpen: WS_CONNECTION_SUCCESS as typeof WS_CONNECTION_SUCCESS,\n  onError: WS_CONNECTION_ERROR as typeof WS_CONNECTION_ERROR,\n  onClose: WS_CONNECTION_CLOSED as typeof WS_CONNECTION_CLOSED,\n  onMessage: WS_GET_MESSAGE as typeof WS_GET_MESSAGE,\n  wsSendMessage: WS_SEND_MESSAGE as typeof WS_SEND_MESSAGE,\n};\n\nexport type TWsActions = typeof wsActions;\n\ninterface IWsConnectionStartAction {readonly type: typeof WS_CONNECTION_START}\ninterface IWsConnectionSuccessAction {readonly type: typeof WS_CONNECTION_SUCCESS, payload: boolean}\ninterface IWsConnectionErrorAction {readonly type: typeof WS_CONNECTION_ERROR, payload: boolean}\ninterface IWsConnectionClosedAction {readonly type: typeof WS_CONNECTION_CLOSED}\ninterface IWsGetMessageAction {readonly type: typeof WS_GET_MESSAGE, payload: TMessages}\ninterface IWsSendMessageAction {readonly type: typeof WS_SEND_MESSAGE}\n\nexport type TWsAction = IWsConnectionStartAction | IWsConnectionSuccessAction | IWsConnectionErrorAction | IWsConnectionClosedAction | IWsGetMessageAction | IWsSendMessageAction;\n","import {\n  WS_CONNECTION_PRIVATE_START,\n  WS_CONNECTION_PRIVATE_SUCCESS,\n  WS_CONNECTION_PRIVATE_ERROR,\n  WS_CONNECTION_PRIVATE_CLOSED,\n  WS_GET_MESSAGE_PRIVATE,\n  WS_SEND_MESSAGE_PRIVATE,\n} from '../constants/ws-private';\nimport { TMessages } from '../types';\n\nexport const wsPrivateActions = {\n  wsInit: WS_CONNECTION_PRIVATE_START as typeof WS_CONNECTION_PRIVATE_START,\n  onOpen: WS_CONNECTION_PRIVATE_SUCCESS as typeof WS_CONNECTION_PRIVATE_SUCCESS,\n  onError: WS_CONNECTION_PRIVATE_ERROR as typeof WS_CONNECTION_PRIVATE_ERROR,\n  onClose: WS_CONNECTION_PRIVATE_CLOSED as typeof WS_CONNECTION_PRIVATE_CLOSED,\n  onMessage: WS_GET_MESSAGE_PRIVATE as typeof WS_GET_MESSAGE_PRIVATE,\n  wsSendMessage: WS_SEND_MESSAGE_PRIVATE as typeof WS_SEND_MESSAGE_PRIVATE,\n};\n\nexport type TWsPrivateActions = typeof wsPrivateActions;\n\ninterface IWsConnectionPrivateStart {\n\treadonly type: typeof WS_CONNECTION_PRIVATE_START;\n}\ninterface IWsConnectionPrivateSuccess {\n\treadonly type: typeof WS_CONNECTION_PRIVATE_SUCCESS, payload: boolean;\n}\ninterface IWsConnectionPrivateError {\n\treadonly type: typeof WS_CONNECTION_PRIVATE_ERROR; payload: boolean;\n}\ninterface IWsConnectionPrivateClosed {\n\treadonly type: typeof WS_CONNECTION_PRIVATE_CLOSED;\n}\ninterface IWsGetMessagePrivate {\n\treadonly type: typeof WS_GET_MESSAGE_PRIVATE; readonly payload: TMessages;\n}\ninterface IWsSendMessagePrivate {\n\treadonly type: typeof WS_SEND_MESSAGE_PRIVATE;\n}\nexport type TWsPrivateAction = IWsConnectionPrivateStart | IWsConnectionPrivateSuccess | IWsConnectionPrivateError | IWsConnectionPrivateClosed | IWsGetMessagePrivate | IWsSendMessagePrivate;\n","import { applyMiddleware, createStore, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from './reducers';\nimport { socketMiddleware } from './middleware';\nimport { wsActions } from './actions/ws';\nimport { wsPrivateActions } from './actions/ws-private';\n\ndeclare global {\n    interface Window {\n      __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n    }\n  }\nexport const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware('wss://norma.nomoreparties.space/orders/all', wsActions, false), socketMiddleware('wss://norma.nomoreparties.space/orders', wsPrivateActions, true)));\nexport const store = createStore(rootReducer, enhancer);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app/app';\nimport './style.css';\nimport { Provider } from 'react-redux';\nimport { store } from './services/store';\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"info-total-orders_info__28y3q\",\"stage\":\"info-total-orders_stage__XeALp\",\"wrapper\":\"info-total-orders_wrapper__2Y0fc\",\"ready\":\"info-total-orders_ready__1_C3G\",\"total\":\"info-total-orders_total__1qB-O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient-details_ingredient__2hFcT\",\"info\":\"ingredient-details_info__14J0F\",\"wrapper\":\"ingredient-details_wrapper__39_0t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"burger-constructor_burgerConstructor__1Ei5R\",\"bun\":\"burger-constructor_bun__12nX_\",\"dopElement\":\"burger-constructor_dopElement__7IufE\",\"finalPrice\":\"burger-constructor_finalPrice__3eljD\",\"price\":\"burger-constructor_price__Q5cGy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"group\":\"order-blank-history_group__bJvrI\",\"base\":\"order-blank-history_base__2YJPb\",\"id\":\"order-blank-history_id__2YCyD\",\"info\":\"order-blank-history_info__3pDLd\",\"price\":\"order-blank-history_price__1o5A9\",\"status\":\"order-blank-history_status__2eCV5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"single-order_container__1W1Ox\",\"id\":\"single-order_id__uGGWK\",\"status\":\"single-order_status__2tpiT\",\"wrapper\":\"single-order_wrapper__26bPh\",\"footer\":\"single-order_footer__3LEcO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__2wyBj\",\"form\":\"login_form__3DD6c\",\"nav\":\"login_nav__3ux7C\",\"link\":\"login_link__2bcVJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile_container__2BbXp\",\"nav\":\"profile_nav__1ddV4\",\"form\":\"profile_form__3yKlC\",\"active\":\"profile_active__187xt\",\"buttons\":\"profile_buttons__1vzW7\",\"button\":\"profile_button__2w-9V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__2rH3-\",\"form\":\"register_form__16uRP\",\"nav\":\"register_nav__1TrIq\",\"link\":\"register_link__2XLtm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgot_container__1Q0Y_\",\"form\":\"forgot_form__APfvt\",\"nav\":\"forgot_nav__4PC_-\",\"link\":\"forgot_link__233rz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reset_container__2B3vl\",\"form\":\"reset_form__1IoGn\",\"nav\":\"reset_nav__gPU_f\",\"link\":\"reset_link__2KjL1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"nav-profile_active__3DYpg\",\"exit\":\"nav-profile_exit__3d0YF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"history_container__2LsyT\",\"nav\":\"history_nav__1m0LY\",\"feed\":\"history_feed__aI6hi\",\"active\":\"history_active__Ppms5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pict\":\"icon-ingredient_pict__3gODs\",\"img\":\"icon-ingredient_img__2Nrdx\",\"inf\":\"icon-ingredient_inf__2T4mm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"item-in-order_item__3Caft\",\"name\":\"item-in-order_name__3obPT\",\"price\":\"item-in-order_price__2VySM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"header\":\"modal_header__2iX3r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardIngredient\":\"burger-ingredient_cardIngredient__3J2Fp\",\"price\":\"burger-ingredient_price__dO1up\",\"CurrencyIcon\":\"burger-ingredient_CurrencyIcon__3I4-U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-details_order__12ZdD\",\"done\":\"order-details_done__1ZCH5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"feed_content__9ySNd\",\"feed\":\"feed_feed__1Jw3v\",\"active\":\"feed_active__3o61L\"};"],"sourceRoot":""}