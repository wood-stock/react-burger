(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{101:function(e,t,n){e.exports={main:"app_main__3yfFw"}},103:function(e,t,n){e.exports={ldsDualRing:"loader_ldsDualRing__1gq9l"}},104:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},106:function(e,t,n){e.exports={wrapper:"add-ingredient_wrapper__MFvyb"}},12:function(e,t,n){e.exports={header:"app-header_header__1iHLW",container:"app-header_container__2ER_-",wrapperNav:"app-header_wrapperNav__24HB_",wrapperLogo:"app-header_wrapperLogo__2krvQ",wrapperLk:"app-header_wrapperLk__1qAw5",button:"app-header_button__1tHq1",li:"app-header_li__2_K6w",ul:"app-header_ul__1EGkg",active:"app-header_active__1gFZ7"}},17:function(e,t,n){e.exports={burgerIngredients:"burger-ingredients_burgerIngredients__2i6ZI",allIngredients:"burger-ingredients_allIngredients__FaT7m",tabs:"burger-ingredients_tabs__1yNyE",tab:"burger-ingredients_tab__1Ru1Z",wrapperAllIngredients:"burger-ingredients_wrapperAllIngredients__2LqNd",ingredients:"burger-ingredients_ingredients__2TY9H",cardsIngredients:"burger-ingredients_cardsIngredients__34MmZ"}},190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(30),s=n.n(a),i=n(9),o=n(6),l=n(101),d=n.n(l),u=n(12),j=n.n(u),b=n(4),p=n(0),m=function(){var e=Object(i.h)().pathname;return Object(p.jsx)("header",{className:j.a.header+" pt-4 pb-4",children:Object(p.jsxs)("div",{className:j.a.container,children:[Object(p.jsx)("div",{className:j.a.wrapperNav,children:Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:"".concat(j.a.ul," text text_type_main-default text_color_inactive"),children:[Object(p.jsx)("li",{className:j.a.li,children:Object(p.jsxs)(o.c,{exact:!0,to:"/",className:"".concat(j.a.button," mr-2"),activeClassName:j.a.active,children:[Object(p.jsx)(b.BurgerIcon,{type:"secondary"}),Object(p.jsx)("span",{className:"pl-2 ",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(p.jsx)("li",{children:Object(p.jsxs)(o.c,{to:"/feed",className:j.a.button,activeClassName:j.a.active,children:[Object(p.jsx)(b.ListIcon,{type:"secondary"}),Object(p.jsx)("span",{className:"pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})})}),Object(p.jsx)("div",{className:j.a.wrapperLogo,children:Object(p.jsx)(o.b,{to:"/",children:Object(p.jsx)(b.Logo,{})})}),Object(p.jsx)("div",{className:"".concat(j.a.wrapperLk," text text_type_main-default text_color_inactive"),children:Object(p.jsxs)(o.c,{to:"/profile",className:"/profile"===e||"/login"===e?"".concat(j.a.button," ").concat(j.a.active):j.a.button,activeClassName:j.a.active,children:[Object(p.jsx)(b.ProfileIcon,{type:"secondary"}),Object(p.jsx)("span",{className:"pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},O=n(24),_=n.n(O),x=n(15),f=function(){return Object(x.b)()},h=x.c,g=n(103),v=n.n(g),y=function(){return Object(p.jsx)("div",{className:v.a.ldsDualRing})},N=function(e){var t=e.headerText,n=Object(i.i)().id,r=h((function(e){return e.ingredients})).ingredients,c=null===r||void 0===r?void 0:r.find((function(e){return e._id===n}));return c?Object(p.jsxs)("section",{className:_.a.ingredient,children:[Object(p.jsx)("h2",{className:"text text_type_main-large mt-30",children:t}),Object(p.jsx)("img",{src:c.image_large,alt:c.name,className:"mb-4"}),Object(p.jsx)("h2",{className:"text text_type_main-medium mb-8",children:c.name}),Object(p.jsxs)("div",{className:_.a.info+" text_color_inactive mb-15",children:[Object(p.jsxs)("div",{className:_.a.wrapper,children:[Object(p.jsx)("span",{className:"text text_type_main-default pb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(p.jsx)("span",{className:"text text_type_digits-default",children:c.calories})]}),Object(p.jsxs)("div",{className:_.a.wrapper,children:[Object(p.jsx)("span",{className:"text text_type_main-default pb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default",children:c.proteins})]}),Object(p.jsxs)("div",{className:_.a.wrapper,children:[Object(p.jsx)("span",{className:"text text_type_main-default pb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default",children:c.fat})]}),Object(p.jsxs)("div",{className:_.a.wrapper,children:[Object(p.jsx)("span",{className:"text text_type_main-default pb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(p.jsx)("span",{className:"text text_type_digits-default",children:c.carbohydrates})]})]})]}):Object(p.jsx)(y,{})},S=n(2),E=n(42),R=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=Object(S.a)({path:"/"},n)).expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var s in n){a+="; "+s;var i=n[s];!0!==i&&(a+="="+i)}document.cookie=a},C=function(e){I(e,"",{expires:-1})},T=function(e){var t=new Date(e),n=new Date;n.setHours(0,0,0,0);var r,c=Math.ceil((+n-+t)/864e5),a=t.getHours()>9?t.getHours():"0".concat(t.getHours()),s=t.getMinutes()>9?t.getMinutes():"0".concat(t.getMinutes());return"".concat((r=c,0===r?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===r?"\u0412\u0447\u0435\u0440\u0430":r>1?"".concat(r," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434"):""),",").concat(a,":").concat(s,"i-GMT+").concat(-1*t.getTimezoneOffset()/60)},w=function(e){return"done"===e?{color:"#00cccc",orderStatus:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}:"pending"===e?{color:"white",orderStatus:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}:"pending"===e?{color:"white",orderStatus:"\u0421\u043e\u0437\u0434\u0430\u043d"}:null},k=function(e){return e.ok?e.json():Promise.reject(e)},D="https://norma.nomoreparties.space/api/",q="REGISTER_REQUEST",U="REGISTER_SUCCESS",L="REGISTER_ERROR",P="LOGIN_REQUEST",G="LOGIN_SUCCESS",M="LOGIN_ERROR",A="LOGOUT_REQUEST",F="LOGOUT_SUCCESS",B="LOGOUT_ERROR",H="REFRESH_REQUEST",z="REFRESH_SUCCESS",J="REFRESH_ERROR",W="FORGOT_REQUEST",V="FORGOT_SUCCESS",Q="FORGOT_ERROR",Y="RESET_REQUEST",X="RESET_SUCCESS",Z="RESET_ERROR",K="USER_REQUEST",$="USER_SUCCESS",ee="USER_ERROR",te="EDIT_REQUEST",ne="EDIT_SUCCESS",re="EDIT_ERROR",ce=function(){return function(e){e({type:H}),fetch("".concat(D,"auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return k(e)})).then((function(t){var n=t.accessToken.split("Bearer ")[1],r=t.refreshToken;I("token",n),localStorage.setItem("refreshToken",r),e({type:z})})).catch((function(){e({type:J})}))}},ae=function(e){var t=e.children,n=Object(E.a)(e,["children"]),c=f(),a=localStorage.getItem("refreshToken"),s=h((function(e){return e.auth})).name;Object(r.useEffect)((function(){c(ce())}),[c]);return Object(p.jsx)(i.b,Object(S.a)(Object(S.a)({},n),{},{render:function(e){var n=e.location;return s||a?t:Object(p.jsx)(i.a,{to:{pathname:"/login",state:{target:n}}})}}))},se=function(e,t){var n,r;return e&&(null===(n=e.state)||void 0===n?void 0:n.target)?(r=e.state.target,delete e.state.target):r="/",r},ie=function(e){var t=e.children,n=Object(E.a)(e,["children"]),r=h((function(e){return e.auth})).name;return Object(p.jsx)(i.b,Object(S.a)(Object(S.a)({},n),{},{render:function(e){var n=e.location;e.history;return r?Object(p.jsx)(i.a,{to:se(n)}):t}}))},oe=n(104),le=n.n(oe),de=function(e){var t=e.closeModal;return Object(p.jsx)("div",{className:le.a.overlay,onClick:t})},ue=n(78),je=n.n(ue),be="CLOSE_MODAL",pe=document.getElementById("modal"),me=function(e){var t=e.children,n=e.headerText,c=e.back,a=Object(i.g)(),o=Object(x.b)(),l=function(){o({type:be}),a.push(c)},d=function(e){"Escape"===e.key&&l()};return Object(r.useEffect)((function(){return document.addEventListener("keydown",d),function(){document.removeEventListener("keydown",d)}})),pe?s.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:je.a.modal,children:[Object(p.jsxs)("header",{className:je.a.header,children:[Object(p.jsx)("p",{className:"text text_type_main-large",children:n}),Object(p.jsx)(b.CloseIcon,{type:"primary",onClick:l})]}),t]}),Object(p.jsx)(de,{closeModal:l})]}),pe):null},Oe=n(8),_e=n(17),xe=n.n(_e),fe=n(21),he=n(79),ge=n.n(he),ve=n(197),ye=function(e){var t=e.ingredient,n=Object(i.h)(),c=h((function(e){return e.constructor})),a=c.constructorIngredients,s=c.constructorBun,l=Object(ve.a)({type:"Ingredient",item:{ingredient:t},collect:function(e){return{isDrag:e.isDragging()}}}),d=Object(Oe.a)(l,2)[1],u=Object(r.useMemo)((function(){return a?a?[].concat(Object(fe.a)(a),[s,s]).filter((function(e){return(null===e||void 0===e?void 0:e.name)===t.name})).length:2*[s].filter((function(e){return(null===e||void 0===e?void 0:e.name)===t.name})).length:null}),[a,s,t.name]);return Object(p.jsxs)(o.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:n}},className:ge.a.cardIngredient,ref:d,"data-test":"ingredient",children:[u?Object(p.jsx)(b.Counter,{count:u,size:"default"}):null,Object(p.jsx)("img",{src:t.image,alt:t.name}),Object(p.jsxs)("div",{className:ge.a.price,children:[Object(p.jsx)("span",{className:"text text_type_digits-default pr-2",children:t.price}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("p",{className:"text text_type_main-default pb-4",children:t.name})]})},Ne=function(){var e=h((function(e){return e.ingredients})).ingredients,t=Object(r.useState)("bun"),n=Object(Oe.a)(t,2),c=n[0],a=n[1],s=Object(r.useRef)(null),i=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),d=function(e,t){return function(){if(a(e),!t.current)return null;i.current&&o.current&&l.current&&t.current.scrollIntoView({block:"start",behavior:"smooth"})}},u=Object(r.useCallback)((function(){if(!s.current||!i.current||!o.current)return null;Math.ceil(s.current.scrollTop)<i.current.scrollHeight/2?a("bun"):Math.ceil(s.current.scrollTop)<i.current.scrollHeight+o.current.scrollHeight/2?a("sauce"):a("main")}),[]);return Object(p.jsxs)("section",{className:xe.a.burgerIngredients,children:[Object(p.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsxs)("div",{className:"".concat(xe.a.tabs," mt-5 mb-5"),children:[Object(p.jsx)("div",{className:xe.a.tab,children:Object(p.jsx)(b.Tab,{value:"bun",active:"bun"===c,onClick:d("bun",i),children:"\u0411\u0443\u043b\u043a\u0438"})}),Object(p.jsx)("div",{className:xe.a.tab,children:Object(p.jsx)(b.Tab,{value:"sauce",active:"sauce"===c,onClick:d("sauce",o),children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(p.jsx)("div",{className:xe.a.tab,children:Object(p.jsx)(b.Tab,{value:"main",active:"main"===c,onClick:d("main",l),children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]}),Object(p.jsxs)("div",{className:xe.a.wrapperAllIngredients,onScroll:u,ref:s,children:[Object(p.jsxs)("div",{className:xe.a.allIngredients,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(p.jsx)("div",{className:xe.a.cardsIngredients,ref:i,children:e.map((function(e){return"bun"===e.type&&Object(p.jsx)(ye,{ingredient:e},e._id)}))})]}),Object(p.jsxs)("div",{className:xe.a.allIngredients,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(p.jsx)("div",{className:xe.a.cardsIngredients,ref:o,children:e.map((function(e){return"sauce"===e.type&&Object(p.jsx)(ye,{ingredient:e},e._id)}))})]}),Object(p.jsxs)("div",{className:xe.a.allIngredients,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(p.jsx)("div",{className:xe.a.cardsIngredients,ref:l,children:e.map((function(e){return"main"===e.type&&Object(p.jsx)(ye,{ingredient:e},e._id)}))})]})]})]})},Se=n(106),Ee=n.n(Se),Re=n(198),Ie="MOVE_CONSTRUCTOR_ITEM",Ce="ADD_CONSTRUCTOR_INGREDIENT",Te="DEL_CONSTRUCTOR_INGREDIENT",we="ADD_ORDER_REQUEST",ke="ADD_ORDER_SUCCESS",De="CLEAR_SELECTED__ERROR",qe=function(e){var t=e.name,n=e.price,c=e.image,a=e.id,s=e.index,i=f(),o=Object(r.useRef)(null),l=Object(Re.a)({accept:"swap-ingredient",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var n;if(o.current){var r=e.index,c=s;if(r!==c){var a=null===(n=o.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(a.bottom-a.top)/2,d=t.getClientOffset().y-a.top;r<c&&d<l||r>c&&d>l||(i(function(e){var t=e.dragIndex,n=e.hoverIndex;return{type:Ie,dragIndex:t,hoverIndex:n}}({dragIndex:r,hoverIndex:c})),e.index=c)}}}}),d=Object(Oe.a)(l,2),u=d[0].handlerId,j=d[1],m=Object(ve.a)({type:"swap-ingredient",item:{id:a,index:s},collect:function(e){return{isDragging:e.isDragging()}}}),O=Object(Oe.a)(m,2),_=O[0].isDragging;(0,O[1])(j(o));var x=_?0:1;return Object(p.jsxs)("li",{className:Ee.a.wrapper,ref:o,style:{opacity:x},"data-handler-id":u,children:[Object(p.jsx)(b.DragIcon,{type:"primary"}),Object(p.jsx)(b.ConstructorElement,{text:t,price:n,thumbnail:c,handleClose:function(){return i({type:Te,index:s})}})]})},Ue=n(25),Le=n.n(Ue),Pe=function(){var e=Object(i.g)(),t=f(),n=localStorage.getItem("refreshToken"),c=h((function(e){return e.constructor})),a=c.constructorIngredients,s=c.constructorBun,o=h((function(e){return e.order})).orderRequest,l=Object(Re.a)({accept:"Ingredient",drop:function(e){t(Object(S.a)(Object(S.a)({type:Ce},e),{},{randomId:Math.round(1e3*Math.random())}))}}),d=Object(Oe.a)(l,2)[1],u=Object(r.useMemo)((function(){return function(e,t){return e&&t?e.reduce((function(e,t){return e+t.price}),2*(null===t||void 0===t?void 0:t.price)):t?2*(null===t||void 0===t?void 0:t.price):null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.price}),0)}(a,s)}),[a,s]);return Object(p.jsx)("section",{className:Le.a.burgerConstructor+" pl-4",ref:d,"data-test":"dropTarget",children:a||s?Object(p.jsxs)(p.Fragment,{children:[s&&Object(p.jsx)("div",{className:Le.a.bun,"data-test":"container-bun-up",children:Object(p.jsx)(b.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(s.name," (\u0432\u0435\u0440\u0445)"),price:s.price,thumbnail:null===s||void 0===s?void 0:s.image})}),a?Object(p.jsx)("ul",{className:Le.a.dopElement,"data-test":"container",children:a.map((function(e,t){return Object(p.jsx)(qe,{name:e.name,price:e.price,image:e.image,id:e._id,index:t},e.key)}))}):Object(p.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u041c\u043e\u0436\u0435\u0442 \u0445\u043e\u0442\u044b \u0431\u044b \u043a\u0435\u0442\u0447\u0443\u043f?"}),s&&Object(p.jsx)("div",{className:Le.a.bun,"data-test":"container-bun-down",children:Object(p.jsx)(b.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(s.name," (\u043d\u0438\u0437)"),price:s.price,thumbnail:s.image})}),Object(p.jsxs)("div",{className:Le.a.finalPrice,children:[Object(p.jsxs)("div",{className:Le.a.price,children:[Object(p.jsx)("span",{className:"text text_type_digits-medium",children:u}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]}),s&&a?Object(p.jsx)(p.Fragment,{children:o?Object(p.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u043d\u0430 \u043a\u0443\u0445\u043d\u044e"}):Object(p.jsx)(b.Button,{type:"primary",size:"large",onClick:n?function(){return t((e=function(){var e=[].concat(Object(fe.a)(a),[s]);return e&&e.map((function(e){return e._id}))}(),function(t){return t({type:we}),fetch("".concat(D,"orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+R("token")},body:JSON.stringify({ingredients:e})}).then((function(e){return k(e)})).then((function(e){return t({type:ke,order:e.order.number})})).catch((function(){t({type:De})}))}));var e}:function(){return e.replace("/login")},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})}):a?Object(p.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u0418 \u0431\u0443\u043b\u043a\u0443 \u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c"}):Object(p.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u0414\u043e\u0431\u0430\u0432\u044c \u043d\u0430\u0447\u0438\u043d\u043a\u0443"})]})]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"text text_type_main-default text_color_inactive",style:{paddingLeft:"70px"},children:[Object(p.jsx)("p",{children:"\u0414\u0430\u0432\u0430\u0439 \u0441\u043e\u0431\u0435\u0440\u0438 \u0443\u0436\u0435 \u0441\u0432\u043e\u0439 \u0431\u0443\u0440\u0433\u0435\u0440!"}),Object(p.jsx)("p",{children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439 \u0441\u044e\u0434\u0430 \u0432\u0441\u0451 \u0447\u0442\u043e \u0445\u043e\u0447\u0435\u0448\u044c!"}),Object(p.jsx)("p",{children:"\u0418 \u0431\u0443\u043b\u043a\u0443 \u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c."}),Object(p.jsx)("p",{children:"\u0411\u0443\u0440\u0433\u0435\u0440 \u0431\u0435\u0437 \u0431\u0443\u043b\u043a\u0438, \u043a\u0430\u043a \u043e\u043a\u0440\u043e\u0448\u043a\u0430 \u0431\u0435\u0437 \u043a\u0432\u0430\u0441\u0430 - \u0441\u0430\u043b\u0430\u0442."})]})})})},Ge=n(81),Me=n.n(Ge),Ae=function(){var e=h((function(e){return e.order})).order;return Object(p.jsxs)("section",{className:Me.a.order,children:[Object(p.jsx)("span",{className:"text text_type_digits-large mb-8",children:e}),Object(p.jsx)("span",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("div",{className:Me.a.done+" mb-15",children:Object(p.jsx)(b.CheckMarkIcon,{type:"primary"})}),Object(p.jsx)("span",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive mb-15",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Fe=n(196),Be=n(108),He=function(){var e=h((function(e){return{ingredientsError:e.ingredients.ingredientsError,orderSuccess:e.order.orderSuccess}})),t=e.orderSuccess,n=e.ingredientsError;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Fe.a,{backend:Be.a,children:[Object(p.jsx)(Ne,{}),Object(p.jsx)(Pe,{})]}),t&&Object(p.jsx)(me,{back:"/",children:Object(p.jsx)(Ae,{})}),n&&Object(p.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u0412\u0441\u0451 \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c, \u043d\u0430 \u043d\u0430\u0441 \u043d\u0430\u043f\u0430\u043b\u0438 \u0422\u0438\u0440\u0430\u043d\u0438\u0434\u044b"})]})},ze=n(33),Je=n.n(ze),We=function(){var e=Object(r.useState)(""),t=Object(Oe.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(Oe.a)(a,2),i=s[0],l=s[1],d=Object(x.b)();return Object(p.jsx)("div",{className:Je.a.container,children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(function(e,t){return function(n){n({type:P}),fetch("".concat(D,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({email:e,password:t})}).then((function(e){return k(e)})).then((function(e){var t=e.accessToken.split("Bearer ")[1],r=e.refreshToken;I("token",t),localStorage.setItem("refreshToken",r),n({type:G,payload:e.user})})).catch((function(e){n({type:M})}))}}(n,i))},className:Je.a.form,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(b.Input,{type:"email",value:n,placeholder:"E-mail",onChange:function(e){return c(e.target.value)},name:"email"}),Object(p.jsx)(b.PasswordInput,{value:i,onChange:function(e){return l(e.target.value)},name:"password"}),Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(p.jsxs)("div",{className:"mt-10 ".concat(Je.a.nav),children:[Object(p.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(p.jsx)(o.b,{to:"/register",className:"text text_type_main-default pl-2 ".concat(Je.a.link),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{className:"text text_type_main-default text_color_inactive pt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(p.jsx)(o.b,{to:"/forgot-password",className:"text text_type_main-default pl-2 ".concat(Je.a.link),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})},Ve=n(43),Qe=n.n(Ve),Ye=function(){var e=Object(r.useState)(""),t=Object(Oe.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(Oe.a)(a,2),l=s[0],d=s[1],u=Object(r.useState)(""),j=Object(Oe.a)(u,2),m=j[0],O=j[1],_=Object(x.b)();return localStorage.getItem("refreshToken")?Object(p.jsx)(i.a,{to:{pathname:"/profile"}}):Object(p.jsx)("div",{className:Qe.a.container,children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_(function(e,t,n){return function(r){r({type:q}),fetch("".concat(D,"auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return k(e)})).then((function(e){var t=e.accessToken.split("Bearer ")[1],n=e.refreshToken;I("token",t),localStorage.setItem("refreshToken",n),r({type:U,payload:e.user})})).catch((function(e){r({type:L})}))}}(l,m,n))},className:Qe.a.form,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(b.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:n,onChange:function(e){return c(e.target.value)},name:"name"}),Object(p.jsx)(b.Input,{type:"email",placeholder:"E-mail",value:l,onChange:function(e){return d(e.target.value)},name:"email"}),Object(p.jsx)(b.PasswordInput,{value:m,onChange:function(e){return O(e.target.value)},name:"password"}),Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(p.jsx)("div",{className:"mt-10 ".concat(Qe.a.nav),children:Object(p.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(p.jsx)(o.b,{to:"/login",className:"text text_type_main-default pl-2 ".concat(Qe.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},Xe=n(44),Ze=n.n(Xe),Ke=function(){var e=Object(r.useState)(""),t=Object(Oe.a)(e,2),n=t[0],c=t[1],a=Object(x.b)(),s=Object(i.g)();return localStorage.getItem("refreshToken")?Object(p.jsx)(i.a,{to:{pathname:"/profile"}}):Object(p.jsx)("div",{className:Ze.a.container,children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(n){n({type:W}),fetch("".concat(D,"password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({email:e})}).then((function(e){return k(e)})).then((function(){n({type:V}),t.replace("/reset-password")})).catch((function(){n({type:Q})}))}}(n,s))},className:Ze.a.form,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(b.Input,{type:"email",value:n,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return c(e.target.value)},name:"email"}),Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("div",{className:"mt-10 ".concat(Ze.a.nav),children:Object(p.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(p.jsx)(o.b,{to:"/login",className:"text text_type_main-default pl-2 ".concat(Ze.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},$e=n(45),et=n.n($e),tt=function(){var e=h((function(e){return e.auth})).forgotSuccess,t=Object(r.useState)(""),n=Object(Oe.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(""),l=Object(Oe.a)(s,2),d=l[0],u=l[1],j=f(),m=Object(i.g)();return e?Object(p.jsx)("div",{className:et.a.container,children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(function(e,t,n){return function(r){r({type:Y}),fetch("".concat(D,"password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({password:e,token:t})}).then((function(e){return k(e)})).then((function(){r({type:X}),n.replace("/login")})).catch((function(){r({type:Z})}))}}(c,d,m))},className:et.a.form,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(b.Input,{icon:"ShowIcon",type:"password",name:"password",value:c,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return a(e.target.value)}}),Object(p.jsx)(b.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return u(e.target.value)},name:"token",value:d}),Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(p.jsx)("div",{className:"mt-10 ".concat(et.a.nav),children:Object(p.jsxs)("div",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(p.jsx)(o.b,{to:"/login",className:"text text_type_main-default pl-2 ".concat(et.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})}):Object(p.jsx)(i.a,{to:"/forgot-password"})},nt=n(55),rt=n.n(nt),ct=function(){var e=Object(i.g)(),t=f();return Object(p.jsxs)("ul",{className:"text text_type_main-medium",children:[Object(p.jsx)("li",{className:"pt-6 pb-6",children:Object(p.jsx)(o.c,{exact:!0,to:"/profile",className:"text_color_inactive",activeClassName:rt.a.active,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(p.jsx)("li",{className:"pt-6 pb-6",children:Object(p.jsx)(o.c,{exact:!0,to:"/profile/orders",className:"text_color_inactive",activeClassName:rt.a.active,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(p.jsx)("li",{className:"pt-6 pb-6 text_color_inactive ".concat(rt.a.exit),onClick:function(){t(function(e){return function(t){t({type:A}),fetch("".concat(D,"auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return k(e)})).then((function(){C("token"),localStorage.removeItem("refreshToken"),t({type:F}),e.replace("/")})).catch((function(){t({type:B})}))}}(e))},children:"\u0412\u044b\u0445\u043e\u0434"})]})},at=n(34),st=n.n(at),it=function(){var e=f();Object(r.useEffect)((function(){e((function(e){e({type:K}),fetch("".concat(D,"auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+R("token")},mode:"cors",cache:"no-cache",credentials:"same-origin"}).then((function(e){return k(e)})).then((function(t){e({type:$,payload:t.user})})).catch((function(){e({type:ee}),C("token"),localStorage.removeItem("refreshToken")}))}))}),[e]);var t=h((function(e){return e.auth.name})),n=h((function(e){return e.auth.email})),c=Object(r.useState)(t),a=Object(Oe.a)(c,2),s=a[0],i=a[1],o=Object(r.useState)(n),l=Object(Oe.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(""),m=Object(Oe.a)(j,2),O=m[0],_=m[1];Object(r.useEffect)((function(){i((function(){return t})),u((function(){return n}))}),[t,n]);return t?Object(p.jsxs)("div",{className:"".concat(st.a.container," mt-30"),children:[Object(p.jsxs)("nav",{className:st.a.nav,children:[Object(p.jsx)(ct,{}),Object(p.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435",Object(p.jsx)("br",{})," \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"]})]}),Object(p.jsxs)("form",{className:st.a.form,onSubmit:function(t){t.preventDefault(),e(function(e,t,n){return function(r){r({type:te}),fetch("".concat(D,"auth/user"),{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+R("token")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return k(e)})).then((function(e){r({type:ne,payload:e.user})})).catch((function(){r({type:re}),ce()}))}}(d,O,s))},children:[Object(p.jsx)(b.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return i(e.target.value)},icon:"EditIcon",value:s,name:"name",errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(p.jsx)(b.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){return u(e.target.value)},icon:"EditIcon",value:d,name:"login",size:"default"}),Object(p.jsx)(b.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){_(e.target.value)},icon:"EditIcon",value:O,name:"password",size:"default"}),s!==t||d!==n||O?Object(p.jsxs)("div",{className:st.a.buttons,children:[Object(p.jsx)("button",{className:"".concat(st.a.button," text text_type_main-default"),type:"reset",onClick:function(){i((function(){return t})),u((function(){return n})),_("")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(b.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):null]})]}):Object(p.jsx)(y,{})},ot=n(56),lt=n.n(ot),dt=n(26),ut=n.n(dt),jt=n(57),bt=n.n(jt),pt=function(e){return Object(p.jsxs)("div",{className:bt.a.pict,style:e.style,children:[Object(p.jsx)("img",{className:bt.a.img,src:e.img,alt:"ingredient"}),e.inf&&Object(p.jsx)("div",{className:"".concat(bt.a.inf," text text_type_main-default"),children:e.inf})]})},mt=function(e){var t=e.number,n=e.name,r=e.createdAt,c=e.status,a=e.ingredients,s=h((function(e){return e.ingredients.ingredients})),i=null===a||void 0===a?void 0:a.map((function(e){return s.find((function(t){return t._id===e}))})),o=i.length,l=i&&(null===i||void 0===i?void 0:i.reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.price)||0)}),0)),d=w(c);return Object(p.jsxs)("div",{className:ut.a.base,children:[Object(p.jsxs)("div",{className:ut.a.id,children:[Object(p.jsxs)("div",{className:"text text_type_digits-default",children:["#",t]}),Object(p.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:T(r)})]}),Object(p.jsx)("div",{className:"text text_type_main-medium pt-6",children:n}),Object(p.jsx)("div",{className:"".concat(ut.a.status," text text_type_main-default pt-3"),children:Object(p.jsx)("span",{style:{color:null===d||void 0===d?void 0:d.color},children:null===d||void 0===d?void 0:d.orderStatus})}),Object(p.jsxs)("div",{className:"".concat(ut.a.info," pt-6"),children:[Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:ut.a.group,children:i.slice(0,6).map((function(e,t){return 5===t?Object(p.jsx)(pt,{inf:"+".concat(o-5),img:null===e||void 0===e?void 0:e.image_mobile,style:{left:-15*t,zIndex:5-t}},t):Object(p.jsx)(pt,{img:null===e||void 0===e?void 0:e.image_mobile,style:{left:-15*t,zIndex:5-t}},t)}))})}),Object(p.jsxs)("div",{className:"".concat(ut.a.price," text text_type_digits-default"),children:[Object(p.jsx)("span",{children:l})," ",Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]})},Ot="WS_CONNECTION_PRIVATE_START",_t="WS_CONNECTION_PRIVATE_SUCCESS",xt="WS_CONNECTION_PRIVATE_ERROR",ft="WS_CONNECTION_PRIVATE_CLOSED",ht="WS_GET_MESSAGE_PRIVATE",gt=function(){var e,t=Object(i.h)(),n=f(),c=h((function(e){return e.wsPrivate})).messages;return Object(r.useEffect)((function(){return n({type:Ot}),function(){n({type:ft})}}),[n]),Object(p.jsxs)("div",{className:"".concat(lt.a.container," mt-10"),children:[Object(p.jsxs)("nav",{className:lt.a.nav,children:[Object(p.jsx)(ct,{}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(p.jsx)("div",{className:lt.a.feed,children:c&&(null===c||void 0===c||null===(e=c.orders)||void 0===e?void 0:e.map((function(e){return Object(p.jsx)(o.b,{to:{pathname:"/profile/orders/".concat(e._id),state:{background:t}},children:Object(p.jsx)(mt,Object(S.a)(Object(S.a)({},e),{},{status:e.status}))},e._id)})))})]})},vt=n(83),yt=n.n(vt),Nt=n(22),St=n.n(Nt),Et=function(){var e=h((function(e){return e.ws.messages})),t=e.totalToday,n=e.total,r=e.orders,c=null===r||void 0===r?void 0:r.filter((function(e){return"done"===e.status})),a=null===r||void 0===r?void 0:r.filter((function(e){return"done"!==e.status}));return Object(p.jsxs)("div",{className:St.a.info,children:[Object(p.jsxs)("div",{className:St.a.stage,children:[Object(p.jsxs)("div",{className:"".concat(St.a.wrapper," text text_type_main-medium"),children:["\u0413\u043e\u0442\u043e\u0432\u044b:",Object(p.jsx)("ul",{className:"".concat(St.a.ready," pt-6 text text_type_digits-default"),children:null===c||void 0===c?void 0:c.slice(0,20).map((function(e){return Object(p.jsx)("li",{children:e.number},e._id)}))})]}),Object(p.jsxs)("div",{className:"".concat(St.a.wrapper," text text_type_main-medium"),children:["\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",Object(p.jsx)("ul",{className:"pt-6 text text_type_digits-default",children:null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsx)("li",{children:e.number},e._id)}))})]})]}),Object(p.jsxs)("div",{className:"text text_type_main-medium",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:",Object(p.jsx)("div",{className:"".concat(St.a.total," text text_type_digits-large"),children:n})]}),Object(p.jsxs)("div",{className:"text text_type_main-medium",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",Object(p.jsx)("div",{className:"".concat(St.a.total," text text_type_digits-large"),children:t})]})]})},Rt="WS_CONNECTION_START",It="WS_CONNECTION_SUCCESS",Ct="WS_CONNECTION_ERROR",Tt="WS_CONNECTION_CLOSED",wt="WS_GET_MESSAGE",kt=function(){var e,t=Object(i.h)(),n=f();Object(r.useEffect)((function(){return n({type:Rt}),function(){n({type:Tt})}}),[n]);var c=h((function(e){return e.ws})).messages;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("main",{children:[Object(p.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsxs)("div",{className:yt.a.content,children:[Object(p.jsx)("div",{className:"".concat(yt.a.feed," pr-2"),children:c&&(null===c||void 0===c||null===(e=c.orders)||void 0===e?void 0:e.slice(0,20).map((function(e){return Object(p.jsx)(o.b,{to:{pathname:"/feed/".concat(e._id),state:{background:t}},children:Object(p.jsx)(mt,Object(S.a)(Object(S.a)({},e),{},{status:""}))},e._id)})))}),Object(p.jsx)(Et,{})]})]})})},Dt=n(27),qt=n.n(Dt),Ut=n(58),Lt=n.n(Ut),Pt=function(e){var t=e.name,n=e.price,r=e.image_mobile;return Object(p.jsxs)("li",{className:Lt.a.item,children:[Object(p.jsx)(pt,{img:r}),Object(p.jsx)("div",{className:"".concat(Lt.a.name," text text_type_main-default"),children:t}),Object(p.jsxs)("div",{className:"".concat(Lt.a.price," text text_type_digits-default"),children:[Object(p.jsx)("span",{children:n}),Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]})},Gt=function(){var e=!!Object(i.j)("/profile"),t=f(),n=Object(i.i)().id;Object(r.useEffect)((function(){return t(e?{type:Ot}:{type:Rt}),function(){t(e?{type:ft}:{type:Tt})}}),[t,e]);var c=h((function(t){return{orders:e?t.wsPrivate.messages.orders:t.ws.messages.orders,catalog:t.ingredients.ingredients}})),a=c.catalog,s=c.orders,o=s&&s.find((function(e){return e._id===n})),l=s&&(null===o||void 0===o?void 0:o.ingredients),d=s&&(null===l||void 0===l?void 0:l.map((function(e){return a.find((function(t){return t._id===e}))}))),u=s&&(null===d||void 0===d?void 0:d.reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.price)||0)}),0)),j=o&&w(o.status);return o?Object(p.jsxs)("div",{className:qt.a.container,children:[Object(p.jsxs)("div",{className:"".concat(qt.a.id," text text_type_digits-default"),children:["#",o.number]}),Object(p.jsx)("div",{className:"text text_type_main-medium pt-10",children:o.name}),Object(p.jsx)("div",{className:"".concat(qt.a.status," text text_type_main-default pt-3"),children:Object(p.jsx)("span",{style:{color:null===j||void 0===j?void 0:j.color},children:null===j||void 0===j?void 0:j.orderStatus})}),Object(p.jsx)("div",{className:"text text_type_main-medium pt-15",children:"C\u043e\u0442\u0430\u0432:"}),Object(p.jsx)("ul",{className:"".concat(qt.a.wrapper," pt-6"),children:d&&d.map((function(e,t){return e?Object(p.jsx)(Pt,Object(S.a)({},e),t):null}))}),Object(p.jsxs)("div",{className:"".concat(qt.a.footer," pt-10"),children:[Object(p.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:T(o.createdAt)}),Object(p.jsxs)("span",{className:"".concat(qt.a.price," text text_type_digits-default"),children:[u,Object(p.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]}):Object(p.jsx)(y,{})},Mt="GET_INGREDIENTS_REQUEST",At="GET_INGREDIENTS_SUCCESS",Ft="GET_INGREDIENTS_ERROR",Bt=function(){var e=f();Object(r.useEffect)((function(){e((function(e){return e({type:Mt}),fetch("".concat(D,"ingredients")).then((function(e){return k(e)})).then((function(t){return e({type:At,ingredients:t.data})})).catch((function(){e({type:Ft})}))})),e(ce())}),[e]);var t=function(){var e=Object(i.h)(),t="PUSH"===Object(i.g)().action&&e.state&&e.state.background;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m,{}),Object(p.jsxs)("main",{className:d.a.main,children:[Object(p.jsxs)(i.d,{location:t||e,children:[Object(p.jsx)(i.b,{path:"/",exact:!0,children:Object(p.jsx)(He,{})}),Object(p.jsx)(ie,{path:"/login",exact:!0,children:Object(p.jsx)(We,{})}),Object(p.jsx)(ie,{path:"/register",exact:!0,children:Object(p.jsx)(Ye,{})}),Object(p.jsx)(ie,{path:"/forgot-password",exact:!0,children:Object(p.jsx)(Ke,{})}),Object(p.jsx)(ie,{path:"/reset-password",exact:!0,children:Object(p.jsx)(tt,{})}),Object(p.jsx)(i.b,{path:"/feed",exact:!0,children:Object(p.jsx)(kt,{})}),Object(p.jsx)(i.b,{path:"/feed/:id",exact:!0,children:Object(p.jsx)(Gt,{})}),Object(p.jsx)(ae,{path:"/profile",exact:!0,children:Object(p.jsx)(it,{})}),Object(p.jsx)(ae,{path:"/profile/orders",exact:!0,children:Object(p.jsx)(gt,{})}),Object(p.jsx)(ae,{path:"/profile/orders/:id",exact:!0,children:Object(p.jsx)(Gt,{})}),Object(p.jsx)(i.b,{path:"/ingredients/:id",exact:!0,children:Object(p.jsx)(N,{headerText:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(p.jsx)(i.b,{children:Object(p.jsxs)("p",{className:"text text_type_digits-large",children:["404",Object(p.jsx)("span",{className:"text text_type_main-large",children:"\u042f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0438 \u043c\u0435\u043d\u044f \u043d\u0435\u0442"})]})})]}),t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.b,{path:"/ingredients/:id",children:Object(p.jsx)(me,{headerText:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",back:"/",children:Object(p.jsx)(N,{})})}),Object(p.jsx)(i.b,{path:"/feed/:id",children:Object(p.jsx)(me,{back:"/feed",children:Object(p.jsx)(Gt,{})})}),Object(p.jsx)(i.b,{path:"/profile/orders/:id",children:Object(p.jsx)(me,{back:"/profile/orders",children:Object(p.jsx)(Gt,{})})})]})]})]})};return h((function(e){return e.ingredients})).ingredientsSuccess?Object(p.jsx)(o.a,{children:Object(p.jsx)(t,{})}):Object(p.jsx)(y,{})},Ht=(n(190),n(31)),zt=n(107),Jt={ingredientsRequest:!1,ingredientsSuccess:!1,ingredientsError:!1,ingredients:[]},Wt={constructorIngredients:[],constructorBun:{}},Vt={orderRequest:!1,orderSuccess:!1,orderFailed:!1,order:null},Qt={email:"",password:"",name:"",registerRequest:!1,registerSuccess:!1,regitsterError:!1,loginRequest:!1,loginSuccess:!1,loginError:!1,logoutRequest:!1,logoutSuccess:!1,logoutError:!1,refreshRequest:!1,refreshSuccess:!1,refreshError:!1,forgotRequest:!1,forgotSuccess:!1,forgotError:!1,resetRequest:!1,resetSuccess:!1,resetError:!1,userRequest:!1,userSuccess:!1,userError:!1,editRequest:!1,editSuccess:!1,editError:!1},Yt={wsConnected:!1,error:!1,messages:{orders:[],total:0,totalToday:0}},Xt={wsConnected:!1,error:!1,messages:{orders:[],total:0,totalToday:0}},Zt=Object(Ht.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return Object(S.a)(Object(S.a)({},e),{},{ingredientsRequest:!0});case At:return Object(S.a)(Object(S.a)({},e),{},{ingredients:t.ingredients,ingredientsRequest:!1,ingredientsSuccess:!0});case Ft:return Object(S.a)(Object(S.a)({},e),{},{ingredientsError:!0,ingredientsRequest:!1});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(S.a)(Object(S.a)({},e),{},{orderRequest:!0,orderSuccess:!1,orderFailed:!1});case ke:return Object(S.a)(Object(S.a)({},e),{},{order:t.order,orderRequest:!1,orderSuccess:!0,orderFailed:!1});case De:return Object(S.a)(Object(S.a)({},e),{},{orderFailed:!0,orderRequest:!1,orderSuccess:!1});case be:return Object(S.a)(Object(S.a)({},e),{},{orderSuccess:!1,order:null});default:return e}},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:var n=t.dragIndex,r=t.hoverIndex,c=Object(fe.a)(e.constructorIngredients),a=c[n],s=c[r];return c[r]=a,c[n]=s,Object(S.a)(Object(S.a)({},e),{},{constructorIngredients:c});case Ce:return"bun"===t.ingredient.type?Object(S.a)(Object(S.a)({},e),{},{constructorBun:t.ingredient}):e.constructorIngredients?Object(S.a)(Object(S.a)({},e),{},{constructorIngredients:[].concat(Object(fe.a)(e.constructorIngredients),[Object(S.a)(Object(S.a)({},t.ingredient),{},{key:t.randomId})])}):Object(S.a)(Object(S.a)({},e),{},{constructorIngredients:[Object(S.a)(Object(S.a)({},t.ingredient),{},{key:t.randomId})]});case Te:return Object(S.a)(Object(S.a)({},e),{},{constructorIngredients:Object(fe.a)(e.constructorIngredients.filter((function(e,n){return t.index!==n})))});case ke:return Object(S.a)(Object(S.a)({},e),{},{constructorIngredients:null,constructorBun:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(S.a)(Object(S.a)({},e),{},{registerRequest:!0,registerSuccess:!1,regitsterError:!1});case U:return Object(S.a)(Object(S.a)({},e),{},{name:t.payload.name,email:t.payload.email,registerRequest:!1,registerSuccess:!0,regitsterError:!1});case L:return Object(S.a)(Object(S.a)({},e),{},{registerRequest:!1,registerSuccess:!1,regitsterError:!0});case P:return Object(S.a)(Object(S.a)({},e),{},{loginRequest:!0,loginSuccess:!1,loginError:!1});case G:return Object(S.a)(Object(S.a)({},e),{},{name:t.payload.name,email:t.payload.email,loginRequest:!1,loginSuccess:!0,loginError:!1});case M:return Object(S.a)(Object(S.a)({},e),{},{loginRequest:!1,loginSuccess:!1,loginError:!0});case A:return Object(S.a)(Object(S.a)({},e),{},{logoutRequest:!0,logoutSuccess:!1,logoutError:!1});case F:return Object(S.a)(Object(S.a)({},e),{},{name:"",email:"",logoutRequest:!1,logoutSuccess:!0,logoutError:!1});case B:return Object(S.a)(Object(S.a)({},e),{},{logoutRequest:!1,logoutSuccess:!1,logoutError:!0});case H:return Object(S.a)(Object(S.a)({},e),{},{refreshRequest:!0,refreshSuccess:!1,refreshError:!1});case z:return Object(S.a)(Object(S.a)({},e),{},{refreshRequest:!1,refreshSuccess:!0,refreshError:!1});case J:return Object(S.a)(Object(S.a)({},e),{},{refreshRequest:!1,refreshSuccess:!1,refreshError:!0});case W:return Object(S.a)(Object(S.a)({},e),{},{forgotRequest:!0,forgotSuccess:!1,forgotError:!1});case V:return Object(S.a)(Object(S.a)({},e),{},{forgotRequest:!1,forgotSuccess:!0,forgotError:!1});case Q:return Object(S.a)(Object(S.a)({},e),{},{forgotRequest:!1,forgotSuccess:!1,forgotError:!0});case Y:return Object(S.a)(Object(S.a)({},e),{},{resetRequest:!0,resetSuccess:!1,resetError:!1});case X:return Object(S.a)(Object(S.a)({},e),{},{forgotSuccess:!1,resetRequest:!1,resetSuccess:!0,resetError:!1});case Z:return Object(S.a)(Object(S.a)({},e),{},{resetRequest:!1,resetSuccess:!1,resetError:!0});case K:return Object(S.a)(Object(S.a)({},e),{},{userRequest:!0,userSuccess:!1,userError:!1});case $:return Object(S.a)(Object(S.a)({},e),{},{name:t.payload.name,email:t.payload.email,userRequest:!1,userSuccess:!0,userError:!1});case ee:return Object(S.a)(Object(S.a)({},e),{},{userRequest:!1,userSuccess:!1,userError:!0});case te:return Object(S.a)(Object(S.a)({},e),{},{editRequest:!0,editSuccess:!1,editError:!1});case ne:return Object(S.a)(Object(S.a)({},e),{},{name:t.payload.name,email:t.payload.email,editRequest:!1,editSuccess:!0,editError:!1});case re:return Object(S.a)(Object(S.a)({},e),{},{editRequest:!1,editSuccess:!1,editError:!0});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It:return Object(S.a)(Object(S.a)({},e),{},{wsConnected:!0});case Ct:return Object(S.a)(Object(S.a)({},e),{},{error:t.payload,wsConnected:!1});case Tt:return Object(S.a)(Object(S.a)({},e),{},{wsConnected:!1});case wt:return Object(S.a)(Object(S.a)({},e),{},{messages:t.payload});default:return e}},wsPrivate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t:return Object(S.a)(Object(S.a)({},e),{},{wsConnected:!0});case xt:return Object(S.a)(Object(S.a)({},e),{},{error:t.payload,wsConnected:!1});case ft:return Object(S.a)(Object(S.a)({},e),{},{wsConnected:!1});case ht:return Object(S.a)(Object(S.a)({},e),{},{messages:t.payload});default:return e}}}),Kt=function(e,t,n){return function(r){var c=null;return function(a){return function(s){var i=r.dispatch,o=s.type,l=s.payload,d=t.wsInit,u=t.wsSendMessage,j=t.onOpen,b=t.onClose,p=t.onError,m=t.onMessage,O=n?R("token"):null;if(o===d&&(c=O?new WebSocket("".concat(e,"?token=").concat(O)):new WebSocket("".concat(e))),c&&(c.onopen=function(e){i({type:j,payload:e})},c.onerror=function(e){i({type:p,payload:e})},c.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(E.a)(n,["success"]));i({type:m,payload:r})},c.onclose=function(e){i({type:b,payload:e})},o===u)){var _=O?Object(S.a)(Object(S.a)({},l),{},{token:O}):Object(S.a)({},l);c.send(JSON.stringify(_))}a(s)}}}},$t={wsInit:Rt,onOpen:It,onError:Ct,onClose:Tt,onMessage:wt,wsSendMessage:"WS_SEND_MESSAGE"},en={wsInit:Ot,onOpen:_t,onError:xt,onClose:ft,onMessage:ht,wsSendMessage:"WS_SEND_MESSAGE_PRIVATE"},tn=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ht.c)(Object(Ht.a)(zt.a,Kt("wss://norma.nomoreparties.space/orders/all",$t,!1),Kt("wss://norma.nomoreparties.space/orders",en,!0))),nn=Object(Ht.d)(Zt,tn);s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(x.a,{store:nn,children:Object(p.jsx)(Bt,{})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={info:"info-total-orders_info__28y3q",stage:"info-total-orders_stage__XeALp",wrapper:"info-total-orders_wrapper__2Y0fc",ready:"info-total-orders_ready__1_C3G",total:"info-total-orders_total__1qB-O"}},24:function(e,t,n){e.exports={ingredient:"ingredient-details_ingredient__2hFcT",info:"ingredient-details_info__14J0F",wrapper:"ingredient-details_wrapper__39_0t"}},25:function(e,t,n){e.exports={burgerConstructor:"burger-constructor_burgerConstructor__1Ei5R",bun:"burger-constructor_bun__12nX_",dopElement:"burger-constructor_dopElement__7IufE",finalPrice:"burger-constructor_finalPrice__3eljD",price:"burger-constructor_price__Q5cGy"}},26:function(e,t,n){e.exports={group:"order-blank-history_group__bJvrI",base:"order-blank-history_base__2YJPb",id:"order-blank-history_id__2YCyD",info:"order-blank-history_info__3pDLd",price:"order-blank-history_price__1o5A9",status:"order-blank-history_status__2eCV5"}},27:function(e,t,n){e.exports={container:"single-order_container__1W1Ox",id:"single-order_id__uGGWK",status:"single-order_status__2tpiT",wrapper:"single-order_wrapper__26bPh",footer:"single-order_footer__3LEcO"}},33:function(e,t,n){e.exports={container:"login_container__2wyBj",form:"login_form__3DD6c",nav:"login_nav__3ux7C",link:"login_link__2bcVJ"}},34:function(e,t,n){e.exports={container:"profile_container__2BbXp",nav:"profile_nav__1ddV4",form:"profile_form__3yKlC",active:"profile_active__187xt",buttons:"profile_buttons__1vzW7",button:"profile_button__2w-9V"}},43:function(e,t,n){e.exports={container:"register_container__2rH3-",form:"register_form__16uRP",nav:"register_nav__1TrIq",link:"register_link__2XLtm"}},44:function(e,t,n){e.exports={container:"forgot_container__1Q0Y_",form:"forgot_form__APfvt",nav:"forgot_nav__4PC_-",link:"forgot_link__233rz"}},45:function(e,t,n){e.exports={container:"reset_container__2B3vl",form:"reset_form__1IoGn",nav:"reset_nav__gPU_f",link:"reset_link__2KjL1"}},55:function(e,t,n){e.exports={active:"nav-profile_active__3DYpg",exit:"nav-profile_exit__3d0YF"}},56:function(e,t,n){e.exports={container:"history_container__2LsyT",nav:"history_nav__1m0LY",feed:"history_feed__aI6hi",active:"history_active__Ppms5"}},57:function(e,t,n){e.exports={pict:"icon-ingredient_pict__3gODs",img:"icon-ingredient_img__2Nrdx",inf:"icon-ingredient_inf__2T4mm"}},58:function(e,t,n){e.exports={item:"item-in-order_item__3Caft",name:"item-in-order_name__3obPT",price:"item-in-order_price__2VySM"}},78:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r"}},79:function(e,t,n){e.exports={cardIngredient:"burger-ingredient_cardIngredient__3J2Fp",price:"burger-ingredient_price__dO1up",CurrencyIcon:"burger-ingredient_CurrencyIcon__3I4-U"}},81:function(e,t,n){e.exports={order:"order-details_order__12ZdD",done:"order-details_done__1ZCH5"}},83:function(e,t,n){e.exports={content:"feed_content__9ySNd",feed:"feed_feed__1Jw3v",active:"feed_active__3o61L"}}},[[191,1,2]]]);
//# sourceMappingURL=main.520a217e.chunk.js.map